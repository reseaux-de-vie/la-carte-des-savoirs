{"ast":null,"code":"import _objectWithoutProperties from \"/home/jean-daniel/Documents/Projets/D\\xE9veloppement/ActivityPods/BCM/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"intent\"];\nvar _this = this,\n  _jsxFileName = \"/home/jean-daniel/Documents/Projets/D\\xE9veloppement/ActivityPods/BCM/frontend/src/layout/SplitViewResource.js\";\nimport React, { useEffect, useMemo } from 'react';\nimport { ResourceContextProvider, registerResource, unregisterResource, WithPermissions } from 'react-admin';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Route, Switch } from 'react-router-dom';\nimport { Grid, Box, makeStyles } from '@material-ui/core';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    container: {\n      minHeight: 'calc(100vh - 98px)'\n    },\n    panel: {\n      backgroundColor: theme.palette.grey['200']\n      // minHeight: 'calc(100vh - 98px)',\n      // height: '100%'\n    }\n  };\n});\n\nvar defaultOptions = {};\nvar ResourceRegister = function ResourceRegister(_ref) {\n  var name = _ref.name,\n    list = _ref.list,\n    create = _ref.create,\n    edit = _ref.edit,\n    show = _ref.show,\n    icon = _ref.icon,\n    _ref$options = _ref.options,\n    options = _ref$options === void 0 ? defaultOptions : _ref$options;\n  var dispatch = useDispatch();\n  useEffect(function () {\n    dispatch(registerResource({\n      name: name,\n      options: options,\n      hasList: !!list,\n      hasEdit: !!edit,\n      hasShow: !!show,\n      hasCreate: !!create,\n      icon: icon\n    }));\n    return function () {\n      return dispatch(unregisterResource(name));\n    };\n  }, [dispatch, name, create, edit, icon, list, show, options]);\n  return null;\n};\nvar ResourceRoutes = function ResourceRoutes(_ref2) {\n  var name = _ref2.name,\n    match = _ref2.match,\n    list = _ref2.list,\n    create = _ref2.create,\n    edit = _ref2.edit,\n    show = _ref2.show,\n    _ref2$options = _ref2.options,\n    options = _ref2$options === void 0 ? defaultOptions : _ref2$options;\n  var isRegistered = useSelector(function (state) {\n    return !!state.admin.resources[name];\n  });\n  var classes = useStyles();\n  var basePath = match ? match.path : '';\n  var resourceData = useMemo(function () {\n    return {\n      resource: name,\n      options: options,\n      hasList: !!list,\n      hasEdit: !!edit,\n      hasShow: !!show,\n      hasCreate: !!create\n    };\n  }, [name, options, create, edit, list, show]);\n\n  // match tends to change even on the same route ; using memo to avoid an extra render\n  return useMemo(function () {\n    // if the registration hasn't finished, no need to render\n    if (!isRegistered) {\n      return null;\n    }\n    return /*#__PURE__*/React.createElement(ResourceContextProvider, {\n      value: name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      alignItems: \"stretch\",\n      className: classes.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12 - (resourceData.options.panelSize || 4),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"\".concat(basePath),\n      render: function render(routeProps) {\n        return /*#__PURE__*/React.createElement(WithPermissions, Object.assign({\n          component: list,\n          basePath: basePath\n        }, routeProps, resourceData, {\n          syncWithLocation: true,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 19\n          }\n        }));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: resourceData.options.panelSize || 4,\n      className: classes.panel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      p: 0,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 15\n      }\n    }, create && /*#__PURE__*/React.createElement(Route, {\n      path: \"\".concat(basePath, \"/create\"),\n      render: function render(routeProps) {\n        return /*#__PURE__*/React.createElement(WithPermissions, Object.assign({\n          component: create,\n          basePath: basePath\n        }, routeProps, resourceData, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 23\n          }\n        }));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 19\n      }\n    }), show && /*#__PURE__*/React.createElement(Route, {\n      path: \"\".concat(basePath, \"/:id/show\"),\n      render: function render(routeProps) {\n        return /*#__PURE__*/React.createElement(WithPermissions, Object.assign({\n          component: show,\n          basePath: basePath,\n          id: decodeURIComponent(routeProps.match.params.id)\n        }, routeProps, resourceData, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 23\n          }\n        }));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }\n    }), edit && /*#__PURE__*/React.createElement(Route, {\n      path: \"\".concat(basePath, \"/:id\"),\n      render: function render(routeProps) {\n        return /*#__PURE__*/React.createElement(WithPermissions, Object.assign({\n          component: edit,\n          basePath: basePath,\n          id: decodeURIComponent(routeProps.match.params.id)\n        }, routeProps, resourceData, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 23\n          }\n        }));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 19\n      }\n    }))))));\n  }, [basePath, name, create, edit, list, show, resourceData, isRegistered, classes]);\n};\nvar SplitViewResource = function SplitViewResource(_ref3) {\n  var _ref3$intent = _ref3.intent,\n    intent = _ref3$intent === void 0 ? 'route' : _ref3$intent,\n    props = _objectWithoutProperties(_ref3, _excluded);\n  return intent === 'registration' ? /*#__PURE__*/React.createElement(ResourceRegister, Object.assign({}, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 5\n    }\n  })) : /*#__PURE__*/React.createElement(ResourceRoutes, Object.assign({}, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }\n  }));\n};\nexport default SplitViewResource;","map":{"version":3,"names":["React","useEffect","useMemo","ResourceContextProvider","registerResource","unregisterResource","WithPermissions","useDispatch","useSelector","Route","Switch","Grid","Box","makeStyles","useStyles","theme","container","minHeight","panel","backgroundColor","palette","grey","defaultOptions","ResourceRegister","name","list","create","edit","show","icon","options","dispatch","hasList","hasEdit","hasShow","hasCreate","ResourceRoutes","match","isRegistered","state","admin","resources","classes","basePath","path","resourceData","resource","panelSize","routeProps","decodeURIComponent","params","id","SplitViewResource","intent","props"],"sources":["/home/jean-daniel/Documents/Projets/DÃ©veloppement/ActivityPods/BCM/frontend/src/layout/SplitViewResource.js"],"sourcesContent":["import React, { useEffect, useMemo } from 'react';\nimport { ResourceContextProvider, registerResource, unregisterResource, WithPermissions } from 'react-admin';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Route, Switch } from 'react-router-dom';\nimport { Grid, Box, makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    minHeight: 'calc(100vh - 98px)'\n  },\n  panel: {\n    backgroundColor: theme.palette.grey['200'],\n    // minHeight: 'calc(100vh - 98px)',\n    // height: '100%'\n  }\n}));\n\nconst defaultOptions = {};\n\nconst ResourceRegister = ({ name, list,  create, edit, show, icon, options = defaultOptions }) => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(\n      registerResource({\n        name,\n        options,\n        hasList: !!list,\n        hasEdit: !!edit,\n        hasShow: !!show,\n        hasCreate: !!create,\n        icon,\n      })\n    );\n    return () => dispatch(unregisterResource(name));\n  }, [dispatch, name, create, edit, icon, list, show, options]);\n  return null;\n};\n\nconst ResourceRoutes = ({ name, match, list, create, edit, show, options = defaultOptions }) => {\n  const isRegistered = useSelector(\n    state => !!state.admin.resources[name]\n  );\n\n  const classes = useStyles();\n\n  const basePath = match ? match.path : '';\n\n  const resourceData = useMemo(\n    () => ({\n      resource: name,\n      options,\n      hasList: !!list,\n      hasEdit: !!edit,\n      hasShow: !!show,\n      hasCreate: !!create,\n    }),\n    [name, options, create, edit, list, show]\n  );\n\n  // match tends to change even on the same route ; using memo to avoid an extra render\n  return useMemo(() => {\n    // if the registration hasn't finished, no need to render\n    if (!isRegistered) {\n      return null;\n    }\n\n    return (\n      <ResourceContextProvider value={name}>\n        <Grid container alignItems=\"stretch\" className={classes.container}>\n          <Grid item xs={12 - (resourceData.options.panelSize || 4)}>\n            <Box>\n              <Route\n                path={`${basePath}`}\n                render={routeProps => (\n                  <WithPermissions\n                    component={list}\n                    basePath={basePath}\n                    {...routeProps}\n                    {...resourceData}\n                    syncWithLocation\n                  />\n                )}\n              />\n            </Box>\n          </Grid>\n          <Grid item xs={resourceData.options.panelSize || 4} className={classes.panel}>\n            <Box p={0}>\n              <Switch>\n                {create && (\n                  <Route\n                    path={`${basePath}/create`}\n                    render={routeProps => (\n                      <WithPermissions\n                        component={create}\n                        basePath={basePath}\n                        {...routeProps}\n                        {...resourceData}\n                      />\n                    )}\n                  />\n                )}\n                {show && (\n                  <Route\n                    path={`${basePath}/:id/show`}\n                    render={routeProps => (\n                      <WithPermissions\n                        component={show}\n                        basePath={basePath}\n                        id={decodeURIComponent(\n                          (routeProps.match)\n                          .params.id\n                          )}\n                        {...routeProps}\n                        {...resourceData}\n                      />\n                    )}\n                  />\n                )}\n                {edit && (\n                  <Route\n                    path={`${basePath}/:id`}\n                    render={routeProps => (\n                      <WithPermissions\n                        component={edit}\n                        basePath={basePath}\n                        id={decodeURIComponent(\n                          (routeProps.match)\n                          .params.id\n                          )}\n                        {...routeProps}\n                        {...resourceData}\n                      />\n                    )}\n                  />\n                )}\n              </Switch>\n            </Box>\n          </Grid>\n        </Grid>\n      </ResourceContextProvider>\n    );\n  }, [basePath, name, create, edit, list, show, resourceData, isRegistered, classes]);\n};\n\nconst SplitViewResource = ({ intent = 'route', ...props }) =>\n  intent === 'registration' ? (\n    <ResourceRegister {...props} />\n  ) : (\n    <ResourceRoutes {...props} />\n  );\n\nexport default SplitViewResource;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}