{"ast":null,"code":"import _slicedToArray from \"/home/jean-daniel/Documents/Projets/D\\xE9veloppement/ActivityPods/BCM/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/jean-daniel/Documents/Projets/D\\xE9veloppement/ActivityPods/BCM/frontend/src/commons/ShareDialog/ContactItem.js\";\nimport React, { useCallback, useState } from 'react';\nimport { makeStyles, Avatar, Switch, ListItem, ListItemAvatar, ListItemText } from '@material-ui/core';\nimport { formatUsername } from '../../utils';\nimport { useTranslate } from 'react-admin';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    listItem: {\n      paddingLeft: 0,\n      paddingRight: 0\n    },\n    primaryText: {\n      width: '30%',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      flexBasis: '100%'\n    },\n    secondaryText: {\n      textAlign: 'center',\n      width: '60%',\n      fontStyle: 'italic',\n      color: 'grey'\n    },\n    avatarItem: {\n      minWidth: 50\n    },\n    avatar: {\n      backgroundImage: \"radial-gradient(circle at 50% 3em, \".concat(theme.palette.primary.light, \" 0%, \").concat(theme.palette.primary.main, \" 100%)\")\n    }\n  };\n});\nvar ContactItem = function ContactItem(_ref) {\n  var _record$vcardGivenN;\n  var record = _ref.record,\n    addInvitation = _ref.addInvitation,\n    removeInvitation = _ref.removeInvitation,\n    canView = _ref.canView,\n    canShare = _ref.canShare,\n    isOrganizer = _ref.isOrganizer;\n  var classes = useStyles();\n  var translate = useTranslate();\n  var _useState = useState(canView),\n    _useState2 = _slicedToArray(_useState, 2),\n    viewChecked = _useState2[0],\n    setViewChecked = _useState2[1];\n  var _useState3 = useState(canShare),\n    _useState4 = _slicedToArray(_useState3, 2),\n    shareChecked = _useState4[0],\n    setShareChecked = _useState4[1];\n  var switchView = useCallback(function () {\n    if (!viewChecked) {\n      setViewChecked(true);\n      addInvitation(record.describes, ['view']);\n    } else {\n      setViewChecked(false);\n      setShareChecked(false);\n      removeInvitation(record.describes);\n    }\n  }, [addInvitation, removeInvitation, record, viewChecked, setViewChecked, setShareChecked]);\n  var switchShare = useCallback(function () {\n    if (!shareChecked) {\n      setShareChecked(true);\n      // If user can already view, we only add a share right\n      if (canView) {\n        addInvitation(record.describes, ['share']);\n      } else {\n        setViewChecked(true);\n        addInvitation(record.describes, ['view', 'share']);\n      }\n    } else {\n      setShareChecked(false);\n      if (canView) {\n        removeInvitation(record.describes);\n      } else {\n        addInvitation(record.describes, ['view']);\n      }\n    }\n  }, [canView, addInvitation, removeInvitation, record, shareChecked, setViewChecked, setShareChecked]);\n  return /*#__PURE__*/React.createElement(ListItem, {\n    className: classes.listItem,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ListItemAvatar, {\n    className: classes.avatarItem,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: record === null || record === void 0 ? void 0 : record['vcard:photo'],\n    className: classes.avatar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, (_record$vcardGivenN = record['vcard:given-name']) === null || _record$vcardGivenN === void 0 ? void 0 : _record$vcardGivenN[0])), /*#__PURE__*/React.createElement(ListItemText, {\n    className: classes.primaryText,\n    primary: record['vcard:given-name'],\n    secondary: formatUsername(record.describes),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ListItemText, {\n    className: classes.secondaryText,\n    primary: translate('app.permission.view'),\n    secondary: /*#__PURE__*/React.createElement(Switch, {\n      size: \"small\",\n      checked: viewChecked,\n      disabled: canView,\n      onChange: switchView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 20\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }), isOrganizer && /*#__PURE__*/React.createElement(ListItemText, {\n    className: classes.secondaryText,\n    primary: translate('app.permission.share'),\n    secondary: /*#__PURE__*/React.createElement(Switch, {\n      size: \"small\",\n      checked: shareChecked,\n      disabled: canShare,\n      onChange: switchShare,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 22\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }));\n};\nexport default ContactItem;","map":{"version":3,"names":["React","useCallback","useState","makeStyles","Avatar","Switch","ListItem","ListItemAvatar","ListItemText","formatUsername","useTranslate","useStyles","theme","listItem","paddingLeft","paddingRight","primaryText","width","whiteSpace","overflow","textOverflow","flexBasis","secondaryText","textAlign","fontStyle","color","avatarItem","minWidth","avatar","backgroundImage","palette","primary","light","main","ContactItem","record","addInvitation","removeInvitation","canView","canShare","isOrganizer","classes","translate","viewChecked","setViewChecked","shareChecked","setShareChecked","switchView","describes","switchShare"],"sources":["/home/jean-daniel/Documents/Projets/DÃ©veloppement/ActivityPods/BCM/frontend/src/commons/ShareDialog/ContactItem.js"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { makeStyles, Avatar, Switch, ListItem, ListItemAvatar, ListItemText } from '@material-ui/core';\nimport { formatUsername } from '../../utils';\nimport { useTranslate } from 'react-admin';\n\nconst useStyles = makeStyles((theme) => ({\n  listItem: {\n    paddingLeft: 0,\n    paddingRight: 0,\n  },\n  primaryText: {\n    width: '30%',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    flexBasis: '100%',\n  },\n  secondaryText: {\n    textAlign: 'center',\n    width: '60%',\n    fontStyle: 'italic',\n    color: 'grey',\n  },\n  avatarItem: {\n    minWidth: 50,\n  },\n  avatar: {\n    backgroundImage: `radial-gradient(circle at 50% 3em, ${theme.palette.primary.light} 0%, ${theme.palette.primary.main} 100%)`,\n  },\n}));\n\nconst ContactItem = ({ record, addInvitation, removeInvitation, canView, canShare, isOrganizer }) => {\n  const classes = useStyles();\n  const translate = useTranslate();\n\n  const [viewChecked, setViewChecked] = useState(canView);\n  const [shareChecked, setShareChecked] = useState(canShare);\n\n  const switchView = useCallback(() => {\n    if (!viewChecked) {\n      setViewChecked(true);\n      addInvitation(record.describes, ['view']);\n    } else {\n      setViewChecked(false);\n      setShareChecked(false);\n      removeInvitation(record.describes);\n    }\n  }, [addInvitation, removeInvitation, record, viewChecked, setViewChecked, setShareChecked]);\n\n  const switchShare = useCallback(() => {\n    if (!shareChecked) {\n      setShareChecked(true);\n      // If user can already view, we only add a share right\n      if (canView) {\n        addInvitation(record.describes, ['share']);\n      } else {\n        setViewChecked(true);\n        addInvitation(record.describes, ['view', 'share']);\n      }\n    } else {\n      setShareChecked(false);\n      if (canView) {\n        removeInvitation(record.describes);\n      } else {\n        addInvitation(record.describes, ['view']);\n      }\n    }\n  }, [canView, addInvitation, removeInvitation, record, shareChecked, setViewChecked, setShareChecked]);\n\n  return (\n    <ListItem className={classes.listItem}>\n      <ListItemAvatar className={classes.avatarItem}>\n        <Avatar src={record?.['vcard:photo']} className={classes.avatar}>\n          {record['vcard:given-name']?.[0]}\n        </Avatar>\n      </ListItemAvatar>\n      <ListItemText\n        className={classes.primaryText}\n        primary={record['vcard:given-name']}\n        secondary={formatUsername(record.describes)}\n      />\n      <ListItemText\n        className={classes.secondaryText}\n        primary={translate('app.permission.view')}\n        secondary={<Switch size=\"small\" checked={viewChecked} disabled={canView} onChange={switchView} />}\n      />\n      {isOrganizer && (\n        <ListItemText\n          className={classes.secondaryText}\n          primary={translate('app.permission.share')}\n          secondary={<Switch size=\"small\" checked={shareChecked} disabled={canShare} onChange={switchShare} />}\n        />\n      )}\n    </ListItem>\n  );\n};\n\nexport default ContactItem;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AACpD,SAASC,UAAU,EAAEC,MAAM,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,cAAc,EAAEC,YAAY,QAAQ,mBAAmB;AACtG,SAASC,cAAc,QAAQ,aAAa;AAC5C,SAASC,YAAY,QAAQ,aAAa;AAE1C,IAAMC,SAAS,GAAGR,UAAU,CAAC,UAACS,KAAK;EAAA,OAAM;IACvCC,QAAQ,EAAE;MACRC,WAAW,EAAE,CAAC;MACdC,YAAY,EAAE;IAChB,CAAC;IACDC,WAAW,EAAE;MACXC,KAAK,EAAE,KAAK;MACZC,UAAU,EAAE,QAAQ;MACpBC,QAAQ,EAAE,QAAQ;MAClBC,YAAY,EAAE,UAAU;MACxBC,SAAS,EAAE;IACb,CAAC;IACDC,aAAa,EAAE;MACbC,SAAS,EAAE,QAAQ;MACnBN,KAAK,EAAE,KAAK;MACZO,SAAS,EAAE,QAAQ;MACnBC,KAAK,EAAE;IACT,CAAC;IACDC,UAAU,EAAE;MACVC,QAAQ,EAAE;IACZ,CAAC;IACDC,MAAM,EAAE;MACNC,eAAe,+CAAwCjB,KAAK,CAACkB,OAAO,CAACC,OAAO,CAACC,KAAK,kBAAQpB,KAAK,CAACkB,OAAO,CAACC,OAAO,CAACE,IAAI;IACtH;EACF,CAAC;AAAA,CAAC,CAAC;AAEH,IAAMC,WAAW,GAAG,SAAdA,WAAW,OAAoF;EAAA;EAAA,IAA9EC,MAAM,QAANA,MAAM;IAAEC,aAAa,QAAbA,aAAa;IAAEC,gBAAgB,QAAhBA,gBAAgB;IAAEC,OAAO,QAAPA,OAAO;IAAEC,QAAQ,QAARA,QAAQ;IAAEC,WAAW,QAAXA,WAAW;EAC5F,IAAMC,OAAO,GAAG9B,SAAS,EAAE;EAC3B,IAAM+B,SAAS,GAAGhC,YAAY,EAAE;EAEhC,gBAAsCR,QAAQ,CAACoC,OAAO,CAAC;IAAA;IAAhDK,WAAW;IAAEC,cAAc;EAClC,iBAAwC1C,QAAQ,CAACqC,QAAQ,CAAC;IAAA;IAAnDM,YAAY;IAAEC,eAAe;EAEpC,IAAMC,UAAU,GAAG9C,WAAW,CAAC,YAAM;IACnC,IAAI,CAAC0C,WAAW,EAAE;MAChBC,cAAc,CAAC,IAAI,CAAC;MACpBR,aAAa,CAACD,MAAM,CAACa,SAAS,EAAE,CAAC,MAAM,CAAC,CAAC;IAC3C,CAAC,MAAM;MACLJ,cAAc,CAAC,KAAK,CAAC;MACrBE,eAAe,CAAC,KAAK,CAAC;MACtBT,gBAAgB,CAACF,MAAM,CAACa,SAAS,CAAC;IACpC;EACF,CAAC,EAAE,CAACZ,aAAa,EAAEC,gBAAgB,EAAEF,MAAM,EAAEQ,WAAW,EAAEC,cAAc,EAAEE,eAAe,CAAC,CAAC;EAE3F,IAAMG,WAAW,GAAGhD,WAAW,CAAC,YAAM;IACpC,IAAI,CAAC4C,YAAY,EAAE;MACjBC,eAAe,CAAC,IAAI,CAAC;MACrB;MACA,IAAIR,OAAO,EAAE;QACXF,aAAa,CAACD,MAAM,CAACa,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC;MAC5C,CAAC,MAAM;QACLJ,cAAc,CAAC,IAAI,CAAC;QACpBR,aAAa,CAACD,MAAM,CAACa,SAAS,EAAE,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;MACpD;IACF,CAAC,MAAM;MACLF,eAAe,CAAC,KAAK,CAAC;MACtB,IAAIR,OAAO,EAAE;QACXD,gBAAgB,CAACF,MAAM,CAACa,SAAS,CAAC;MACpC,CAAC,MAAM;QACLZ,aAAa,CAACD,MAAM,CAACa,SAAS,EAAE,CAAC,MAAM,CAAC,CAAC;MAC3C;IACF;EACF,CAAC,EAAE,CAACV,OAAO,EAAEF,aAAa,EAAEC,gBAAgB,EAAEF,MAAM,EAAEU,YAAY,EAAED,cAAc,EAAEE,eAAe,CAAC,CAAC;EAErG,oBACE,oBAAC,QAAQ;IAAC,SAAS,EAAEL,OAAO,CAAC5B,QAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACpC,oBAAC,cAAc;IAAC,SAAS,EAAE4B,OAAO,CAACf,UAAW;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAC5C,oBAAC,MAAM;IAAC,GAAG,EAAES,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,aAAa,CAAE;IAAC,SAAS,EAAEM,OAAO,CAACb,MAAO;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,0BAC7DO,MAAM,CAAC,kBAAkB,CAAC,wDAA1B,oBAA6B,CAAC,CAAC,CACzB,CACM,eACjB,oBAAC,YAAY;IACX,SAAS,EAAEM,OAAO,CAACzB,WAAY;IAC/B,OAAO,EAAEmB,MAAM,CAAC,kBAAkB,CAAE;IACpC,SAAS,EAAE1B,cAAc,CAAC0B,MAAM,CAACa,SAAS,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAC5C,eACF,oBAAC,YAAY;IACX,SAAS,EAAEP,OAAO,CAACnB,aAAc;IACjC,OAAO,EAAEoB,SAAS,CAAC,qBAAqB,CAAE;IAC1C,SAAS,eAAE,oBAAC,MAAM;MAAC,IAAI,EAAC,OAAO;MAAC,OAAO,EAAEC,WAAY;MAAC,QAAQ,EAAEL,OAAQ;MAAC,QAAQ,EAAES,UAAW;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAClG,EACDP,WAAW,iBACV,oBAAC,YAAY;IACX,SAAS,EAAEC,OAAO,CAACnB,aAAc;IACjC,OAAO,EAAEoB,SAAS,CAAC,sBAAsB,CAAE;IAC3C,SAAS,eAAE,oBAAC,MAAM;MAAC,IAAI,EAAC,OAAO;MAAC,OAAO,EAAEG,YAAa;MAAC,QAAQ,EAAEN,QAAS;MAAC,QAAQ,EAAEU,WAAY;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAExG,CACQ;AAEf,CAAC;AAED,eAAef,WAAW"},"metadata":{},"sourceType":"module"}