{"ast":null,"code":"import { Extension } from '@tiptap/core';\nimport { undo as _undo, redo as _redo, history } from 'prosemirror-history';\nvar History = Extension.create({\n  name: 'history',\n  addOptions: function addOptions() {\n    return {\n      depth: 100,\n      newGroupDelay: 500\n    };\n  },\n  addCommands: function addCommands() {\n    return {\n      undo: function undo() {\n        return function (_ref) {\n          var state = _ref.state,\n            dispatch = _ref.dispatch;\n          return _undo(state, dispatch);\n        };\n      },\n      redo: function redo() {\n        return function (_ref2) {\n          var state = _ref2.state,\n            dispatch = _ref2.dispatch;\n          return _redo(state, dispatch);\n        };\n      }\n    };\n  },\n  addProseMirrorPlugins: function addProseMirrorPlugins() {\n    return [history(this.options)];\n  },\n  addKeyboardShortcuts: function addKeyboardShortcuts() {\n    var _this = this;\n    return {\n      'Mod-z': function ModZ() {\n        return _this.editor.commands.undo();\n      },\n      'Mod-y': function ModY() {\n        return _this.editor.commands.redo();\n      },\n      'Shift-Mod-z': function ShiftModZ() {\n        return _this.editor.commands.redo();\n      },\n      // Russian keyboard layouts\n      'Mod-я': function ModЯ() {\n        return _this.editor.commands.undo();\n      },\n      'Shift-Mod-я': function ShiftModЯ() {\n        return _this.editor.commands.redo();\n      }\n    };\n  }\n});\nexport { History, History as default };","map":{"version":3,"sources":["../src/history.ts"],"names":[],"mappings":";;AAuBa,IAAA,OAAO,GAAG,SAAS,CAAC,MAAM,CAAiB;EACtD,IAAI,EAAE,SAAS;EAEf,UAAU,wBAAA;IACR,OAAO;MACL,KAAK,EAAE,GAAG;MACV,aAAa,EAAE;KAChB;GACF;EAED,WAAW,yBAAA;IACT,OAAO;MACL,IAAI,EAAE;QAAA,OAAM,gBAAwB;UAAA,IAArB,KAAK,QAAL,KAAK;YAAE,QAAQ,QAAR,QAAQ;UAC5B,OAAO,KAAI,CAAC,KAAK,EAAE,QAAQ,CAAC;SAC7B;MAAA;MACD,IAAI,EAAE;QAAA,OAAM,iBAAwB;UAAA,IAArB,KAAK,SAAL,KAAK;YAAE,QAAQ,SAAR,QAAQ;UAC5B,OAAO,KAAI,CAAC,KAAK,EAAE,QAAQ,CAAC;SAC7B;MAAA;KACF;GACF;EAED,qBAAqB,mCAAA;IACnB,OAAO,CACL,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CACtB;GACF;EAED,oBAAoB,kCAAA;IAAA;IAClB,OAAO;MACL,OAAO,EAAE;QAAA,OAAM,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE;MAAA;MAC1C,OAAO,EAAE;QAAA,OAAM,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE;MAAA;MAC1C,aAAa,EAAE;QAAA,OAAM,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE;MAAA;;MAGhD,OAAO,EAAE;QAAA,OAAM,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE;MAAA;MAC1C,aAAa,EAAE;QAAA,OAAM,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE;MAAA;KACjD;EACF;AACF,CAAA,CAAA","sourcesContent":["import { Extension } from '@tiptap/core'\nimport { history, redo, undo } from 'prosemirror-history'\n\nexport interface HistoryOptions {\n  depth: number,\n  newGroupDelay: number,\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    history: {\n      /**\n       * Undo recent changes\n       */\n      undo: () => ReturnType,\n      /**\n       * Reapply reverted changes\n       */\n      redo: () => ReturnType,\n    }\n  }\n}\n\nexport const History = Extension.create<HistoryOptions>({\n  name: 'history',\n\n  addOptions() {\n    return {\n      depth: 100,\n      newGroupDelay: 500,\n    }\n  },\n\n  addCommands() {\n    return {\n      undo: () => ({ state, dispatch }) => {\n        return undo(state, dispatch)\n      },\n      redo: () => ({ state, dispatch }) => {\n        return redo(state, dispatch)\n      },\n    }\n  },\n\n  addProseMirrorPlugins() {\n    return [\n      history(this.options),\n    ]\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-z': () => this.editor.commands.undo(),\n      'Mod-y': () => this.editor.commands.redo(),\n      'Shift-Mod-z': () => this.editor.commands.redo(),\n\n      // Russian keyboard layouts\n      'Mod-я': () => this.editor.commands.undo(),\n      'Shift-Mod-я': () => this.editor.commands.redo(),\n    }\n  },\n})\n"]},"metadata":{},"sourceType":"module"}