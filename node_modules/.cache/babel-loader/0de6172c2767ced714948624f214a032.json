{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"/home/jean-daniel/Documents/Projets/D\\xE9veloppement/ActivityPods/BCM/frontend/src/resources/Event/EventAlert.js\";\nimport React from 'react';\nimport { useShowContext, useGetIdentity, useTranslate } from 'react-admin';\nimport { Box } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport { useCollection } from '@semapps/activitypub-components';\nvar EventAlert = function EventAlert() {\n  var translate = useTranslate();\n  var _useShowContext = useShowContext(),\n    record = _useShowContext.record;\n  var _useGetIdentity = useGetIdentity(),\n    identity = _useGetIdentity.identity;\n  var _useCollection = useCollection(record === null || record === void 0 ? void 0 : record['apods:announces']),\n    announces = _useCollection.items,\n    loading = _useCollection.loading;\n  var _useCollection2 = useCollection(record === null || record === void 0 ? void 0 : record['apods:announcers']),\n    announcers = _useCollection2.items;\n  var _useCollection3 = useCollection(record === null || record === void 0 ? void 0 : record['apods:attendees']),\n    attendees = _useCollection3.items;\n  if (!record || !(identity === null || identity === void 0 ? void 0 : identity.id) || loading) return null;\n  var message;\n  if ((record === null || record === void 0 ? void 0 : record['dc:creator']) === (identity === null || identity === void 0 ? void 0 : identity.id)) {\n    if (announces.length === 0) {\n      message = translate('app.helper.event_draft_mode');\n    }\n  } else {\n    var status = Array.isArray(record === null || record === void 0 ? void 0 : record['apods:hasStatus']) ? record === null || record === void 0 ? void 0 : record['apods:hasStatus'] : [record === null || record === void 0 ? void 0 : record['apods:hasStatus']];\n    if (!attendees.includes(identity === null || identity === void 0 ? void 0 : identity.id) && !status.includes('apods:Closed')) {\n      message = translate('app.helper.event_join_right');\n    } else if (announcers.includes(identity === null || identity === void 0 ? void 0 : identity.id)) {\n      message = translate('app.helper.event_share_right');\n    }\n  }\n  if (message) {\n    return /*#__PURE__*/React.createElement(Box, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Alert, {\n      severity: \"info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }\n    }, message));\n  } else {\n    return null;\n  }\n};\nexport default EventAlert;","map":{"version":3,"names":["React","useShowContext","useGetIdentity","useTranslate","Box","Alert","useCollection","EventAlert","translate","record","identity","announces","items","loading","announcers","attendees","id","message","length","status","Array","isArray","includes"],"sources":["/home/jean-daniel/Documents/Projets/DÃ©veloppement/ActivityPods/BCM/frontend/src/resources/Event/EventAlert.js"],"sourcesContent":["import React from 'react';\nimport { useShowContext, useGetIdentity, useTranslate } from 'react-admin';\nimport { Box } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport { useCollection } from '@semapps/activitypub-components';\n\nconst EventAlert = () => {\n  const translate = useTranslate();\n  const { record } = useShowContext();\n  const { identity } = useGetIdentity();\n  const { items: announces, loading } = useCollection(record?.['apods:announces']);\n  const { items: announcers } = useCollection(record?.['apods:announcers']);\n  const { items: attendees } = useCollection(record?.['apods:attendees']);\n\n  if (!record || !identity?.id || loading) return null;\n\n  let message;\n\n  if (record?.['dc:creator'] === identity?.id) {\n    if (announces.length === 0) {\n      message = translate('app.helper.event_draft_mode');\n    }\n  } else {\n    const status = Array.isArray(record?.['apods:hasStatus'])\n      ? record?.['apods:hasStatus']\n      : [record?.['apods:hasStatus']];\n    if (!attendees.includes(identity?.id) && !status.includes('apods:Closed')) {\n      message = translate('app.helper.event_join_right');\n    } else if (announcers.includes(identity?.id)) {\n      message = translate('app.helper.event_share_right');\n    }\n  }\n\n  if (message) {\n    return (\n      <Box>\n        <Alert severity=\"info\">{message}</Alert>\n      </Box>\n    );\n  } else {\n    return null;\n  }\n};\n\nexport default EventAlert;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,cAAc,EAAEC,cAAc,EAAEC,YAAY,QAAQ,aAAa;AAC1E,SAASC,GAAG,QAAQ,mBAAmB;AACvC,OAAOC,KAAK,MAAM,wBAAwB;AAC1C,SAASC,aAAa,QAAQ,iCAAiC;AAE/D,IAAMC,UAAU,GAAG,SAAbA,UAAU,GAAS;EACvB,IAAMC,SAAS,GAAGL,YAAY,EAAE;EAChC,sBAAmBF,cAAc,EAAE;IAA3BQ,MAAM,mBAANA,MAAM;EACd,sBAAqBP,cAAc,EAAE;IAA7BQ,QAAQ,mBAARA,QAAQ;EAChB,qBAAsCJ,aAAa,CAACG,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,iBAAiB,CAAC,CAAC;IAAjEE,SAAS,kBAAhBC,KAAK;IAAaC,OAAO,kBAAPA,OAAO;EACjC,sBAA8BP,aAAa,CAACG,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,kBAAkB,CAAC,CAAC;IAA1DK,UAAU,mBAAjBF,KAAK;EACb,sBAA6BN,aAAa,CAACG,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,iBAAiB,CAAC,CAAC;IAAxDM,SAAS,mBAAhBH,KAAK;EAEb,IAAI,CAACH,MAAM,IAAI,EAACC,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEM,EAAE,KAAIH,OAAO,EAAE,OAAO,IAAI;EAEpD,IAAII,OAAO;EAEX,IAAI,CAAAR,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,YAAY,CAAC,OAAKC,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEM,EAAE,GAAE;IAC3C,IAAIL,SAAS,CAACO,MAAM,KAAK,CAAC,EAAE;MAC1BD,OAAO,GAAGT,SAAS,CAAC,6BAA6B,CAAC;IACpD;EACF,CAAC,MAAM;IACL,IAAMW,MAAM,GAAGC,KAAK,CAACC,OAAO,CAACZ,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,iBAAiB,CAAC,CAAC,GACrDA,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,iBAAiB,CAAC,GAC3B,CAACA,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,iBAAiB,CAAC,CAAC;IACjC,IAAI,CAACM,SAAS,CAACO,QAAQ,CAACZ,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEM,EAAE,CAAC,IAAI,CAACG,MAAM,CAACG,QAAQ,CAAC,cAAc,CAAC,EAAE;MACzEL,OAAO,GAAGT,SAAS,CAAC,6BAA6B,CAAC;IACpD,CAAC,MAAM,IAAIM,UAAU,CAACQ,QAAQ,CAACZ,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEM,EAAE,CAAC,EAAE;MAC5CC,OAAO,GAAGT,SAAS,CAAC,8BAA8B,CAAC;IACrD;EACF;EAEA,IAAIS,OAAO,EAAE;IACX,oBACE,oBAAC,GAAG;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACF,oBAAC,KAAK;MAAC,QAAQ,EAAC,MAAM;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAEA,OAAO,CAAS,CACpC;EAEV,CAAC,MAAM;IACL,OAAO,IAAI;EACb;AACF,CAAC;AAED,eAAeV,UAAU"},"metadata":{},"sourceType":"module"}