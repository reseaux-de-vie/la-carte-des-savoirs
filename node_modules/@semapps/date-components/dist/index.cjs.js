"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@material-ui/pickers"),r=require("react-admin"),n=require("@material-ui/core"),a=require("@date-io/date-fns"),o=require("@material-ui/icons/Clear"),i=require("@fullcalendar/react"),l=require("@fullcalendar/daygrid"),u=require("react-router-dom"),c=require("@fullcalendar/list");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=s(e),d=s(a),f=s(o),m=s(i),b=s(l),g=s(c);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},k=P(4),C=P(2),D=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,T=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=k(e.getFullYear()),r=C(e.getMonth()+1),n=C(e.getDate()),a=C(e.getHours()),o=C(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(o)},w=function(e){return null==e||""===e?"":e instanceof Date?T(e):D.test(e)?e:T(new Date(e))},j=function(e){return e?new Date(e):""},x=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],E=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat","allowClear"],S=function(a){var o=a.PickerComponent,i=a.format,l=void 0===i?w:i,u=a.label,c=a.options,s=a.source,m=a.resource,b=a.helperText,g=a.margin,P=void 0===g?"dense":g,k=a.onBlur,C=a.onChange,D=a.onFocus,T=a.parse,S=void 0===T?j:T,I=a.validate,q=a.variant,V=void 0===q?"filled":q;a.defaultValue;var F,M=a.providerOptions,B=M.utils,L=M.locale,R=a.pickerVariant,K=void 0===R?"dialog":R,N=a.stringFormat,_=void 0===N?"ISO":N,A=a.allowClear,H=O(a,E),z=r.useTranslate(),U=r.useInput(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({format:l,onBlur:k,onChange:C,onFocus:D,parse:S,resource:m,source:s,validate:I},H)),Y=U.id,G=U.input,$=U.isRequired,J=U.meta,Q=J.error,W=J.touched,X=e.useCallback((function(e){Date.parse(e)?G.onChange("ISO"===_?e.toISOString():e.toString()):G.onChange(null)}),[]),Z=e.useCallback((function(e){e.stopPropagation(),G.onChange(null)}),[]);return p.default.createElement(t.MuiPickersUtilsProvider,{utils:B||d.default,locale:L},p.default.createElement(o,h({id:Y,InputLabelProps:{shrink:!0},InputProps:{endAdornment:A?p.default.createElement(n.IconButton,{onClick:Z},p.default.createElement(f.default,null)):void 0},label:p.default.createElement(r.FieldTitle,{label:u,source:s,resource:m,isRequired:$}),variant:K,inputVariant:V,margin:P,error:!(!W||!Q),helperText:p.default.createElement(r.InputHelperText,{touched:W,error:Q,helperText:b}),clearLabel:z("ra.action.clear_input_value"),cancelLabel:z("ra.action.cancel")},c,((F=H).allowEmpty,F.alwaysOn,F.basePath,F.component,F.defaultValue,F.format,F.formClassName,F.initialValue,F.initializeForm,F.input,F.isRequired,F.label,F.limitChoicesToValue,F.locale,F.meta,F.options,F.optionText,F.optionValue,F.parse,F.record,F.resource,F.source,F.textAlign,F.translate,F.translateChoice,F.labelTime,O(F,x)),{value:G.value?new Date(G.value):null,onChange:X,onBlur:function(){return G.onBlur(G.value?"ISO"===_?new Date(G.value).toISOString():new Date(G.value).toString():null)}})))};S.defaultProps={isRequired:!1,meta:{touched:!1,error:!1},options:{},providerOptions:{utils:d.default,locale:void 0},parse:function(e){return""===e?null:e}};var I=function(t){var n=t.label,a=t.startDate,o=t.endDate,i=t.linkType,l=u.useHistory(),c=r.useListContext(),s=c.ids,p=c.data,d=c.basePath,f=new URLSearchParams(l.location.search),m=e.useCallback((function(e){var t=e.event;e.jsEvent.preventDefault(),l.push(t.url)}),[]),b=e.useCallback((function(e){var t=e.view;f.set("month",t.currentStart.getMonth()+1),f.set("year",t.currentStart.getFullYear()),l.replace({pathname:l.location.pathname,search:"?"+f.toString()})}),[f]),g=e.useMemo((function(){return s.filter((function(e){return p[e]})).map((function(e){return{id:e,title:"string"==typeof n?p[e][n]:n(p[e]),start:"string"==typeof a?p[e][a]:a(p[e]),end:"string"==typeof o?p[e][o]:o(p[e]),url:r.linkToRecord(d,e)+"/"+i}}))}),[p,s,d]);return{initialDate:f.has("month")?new Date(f.get("year"),f.get("month")-1):new Date,events:g,datesSet:b,eventClick:m}},q=n.makeStyles((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),V=function(e){var t=n.useTheme(),r=I(e);return q(),p.default.createElement(m.default,h({plugins:[b.default],locale:e.locale,initialView:"dayGridMonth",eventBackgroundColor:t.palette.primary.main},r))};V.defaultProps={linkType:"edit"};var F=n.makeStyles((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),M=function(e){var t=I(e);return F(),p.default.createElement(m.default,h({plugins:[g.default],locale:e.locale,initialView:"listMonth"},t))};M.defaultProps={linkType:"edit"};exports.CalendarList=V,exports.DateInput=function(e){return p.default.createElement(S,h({PickerComponent:t.DatePicker},e))},exports.DateTimeInput=function(e){return p.default.createElement(S,h({PickerComponent:t.DateTimePicker},e))},exports.DaysList=M,exports.KeyboardDateInput=function(e){return p.default.createElement(S,h({PickerComponent:t.KeyboardDatePicker},e))},exports.KeyboardDateTimeInput=function(e){return p.default.createElement(S,h({PickerComponent:t.KeyboardDateTimePicker},e))},exports.KeyboardTimeInput=function(e){return p.default.createElement(S,h({PickerComponent:t.KeyboardTimePicker},e))},exports.TimeInput=function(e){return p.default.createElement(S,h({PickerComponent:t.TimePicker},e))},exports.useFullCalendarProps=I;
//# sourceMappingURL=index.cjs.js.map
