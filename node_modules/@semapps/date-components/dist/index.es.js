import e,{useCallback as t,useMemo as r}from"react";import{MuiPickersUtilsProvider as n,DatePicker as a,TimePicker as o,DateTimePicker as i,KeyboardDatePicker as l,KeyboardDateTimePicker as c,KeyboardTimePicker as u}from"@material-ui/pickers";import{useTranslate as p,useInput as s,FieldTitle as m,InputHelperText as f,useListContext as d,linkToRecord as g}from"react-admin";import{IconButton as v,makeStyles as b,useTheme as h}from"@material-ui/core";import y from"@date-io/date-fns";import O from"@material-ui/icons/Clear";import C from"@fullcalendar/react";import P from"@fullcalendar/daygrid";import{useHistory as w}from"react-router-dom";import k from"@fullcalendar/list";function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},V=T(4),x=T(2),F=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,I=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=V(e.getFullYear()),r=x(e.getMonth()+1),n=x(e.getDate()),a=x(e.getHours()),o=x(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(o)},B=function(e){return null==e||""===e?"":e instanceof Date?I(e):F.test(e)?e:I(new Date(e))},R=function(e){return e?new Date(e):""},q=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],M=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat","allowClear"],L=function(r){var a=r.PickerComponent,o=r.format,i=void 0===o?B:o,l=r.label,c=r.options,u=r.source,d=r.resource,g=r.helperText,b=r.margin,h=void 0===b?"dense":b,C=r.onBlur,P=r.onChange,w=r.onFocus,k=r.parse,T=void 0===k?R:k,V=r.validate,x=r.variant,F=void 0===x?"filled":x;r.defaultValue;var I,L=r.providerOptions,N=L.utils,A=L.locale,z=r.pickerVariant,Y=void 0===z?"dialog":z,_=r.stringFormat,G=void 0===_?"ISO":_,H=r.allowClear,U=S(r,M),$=p(),J=s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({format:i,onBlur:C,onChange:P,onFocus:w,parse:T,resource:d,source:u,validate:V},U)),K=J.id,Q=J.input,W=J.isRequired,X=J.meta,Z=X.error,ee=X.touched,te=t((function(e){Date.parse(e)?Q.onChange("ISO"===G?e.toISOString():e.toString()):Q.onChange(null)}),[]),re=t((function(e){e.stopPropagation(),Q.onChange(null)}),[]);return e.createElement(n,{utils:N||y,locale:A},e.createElement(a,E({id:K,InputLabelProps:{shrink:!0},InputProps:{endAdornment:H?e.createElement(v,{onClick:re},e.createElement(O,null)):void 0},label:e.createElement(m,{label:l,source:u,resource:d,isRequired:W}),variant:Y,inputVariant:F,margin:h,error:!(!ee||!Z),helperText:e.createElement(f,{touched:ee,error:Z,helperText:g}),clearLabel:$("ra.action.clear_input_value"),cancelLabel:$("ra.action.cancel")},c,((I=U).allowEmpty,I.alwaysOn,I.basePath,I.component,I.defaultValue,I.format,I.formClassName,I.initialValue,I.initializeForm,I.input,I.isRequired,I.label,I.limitChoicesToValue,I.locale,I.meta,I.options,I.optionText,I.optionValue,I.parse,I.record,I.resource,I.source,I.textAlign,I.translate,I.translateChoice,I.labelTime,S(I,q)),{value:Q.value?new Date(Q.value):null,onChange:te,onBlur:function(){return Q.onBlur(Q.value?"ISO"===G?new Date(Q.value).toISOString():new Date(Q.value).toString():null)}})))};L.defaultProps={isRequired:!1,meta:{touched:!1,error:!1},options:{},providerOptions:{utils:y,locale:void 0},parse:function(e){return""===e?null:e}};var N=function(e){var n=e.label,a=e.startDate,o=e.endDate,i=e.linkType,l=w(),c=d(),u=c.ids,p=c.data,s=c.basePath,m=new URLSearchParams(l.location.search),f=t((function(e){var t=e.event;e.jsEvent.preventDefault(),l.push(t.url)}),[]),v=t((function(e){var t=e.view;m.set("month",t.currentStart.getMonth()+1),m.set("year",t.currentStart.getFullYear()),l.replace({pathname:l.location.pathname,search:"?"+m.toString()})}),[m]),b=r((function(){return u.filter((function(e){return p[e]})).map((function(e){return{id:e,title:"string"==typeof n?p[e][n]:n(p[e]),start:"string"==typeof a?p[e][a]:a(p[e]),end:"string"==typeof o?p[e][o]:o(p[e]),url:g(s,e)+"/"+i}}))}),[p,u,s]);return{initialDate:m.has("month")?new Date(m.get("year"),m.get("month")-1):new Date,events:b,datesSet:v,eventClick:f}},A=b((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),z=function(t){var r=h(),n=N(t);return A(),e.createElement(C,E({plugins:[P],locale:t.locale,initialView:"dayGridMonth",eventBackgroundColor:r.palette.primary.main},n))};z.defaultProps={linkType:"edit"};var Y=b((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),_=function(t){var r=N(t);return Y(),e.createElement(C,E({plugins:[k],locale:t.locale,initialView:"listMonth"},r))};_.defaultProps={linkType:"edit"};var G=function(t){return e.createElement(L,E({PickerComponent:a},t))},H=function(t){return e.createElement(L,E({PickerComponent:o},t))},U=function(t){return e.createElement(L,E({PickerComponent:i},t))},$=function(t){return e.createElement(L,E({PickerComponent:l},t))},J=function(t){return e.createElement(L,E({PickerComponent:c},t))},K=function(t){return e.createElement(L,E({PickerComponent:u},t))};export{z as CalendarList,G as DateInput,U as DateTimeInput,_ as DaysList,$ as KeyboardDateInput,J as KeyboardDateTimeInput,K as KeyboardTimeInput,H as TimeInput,N as useFullCalendarProps};
//# sourceMappingURL=index.es.js.map
