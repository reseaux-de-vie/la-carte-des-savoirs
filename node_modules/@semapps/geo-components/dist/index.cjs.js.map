{"version":3,"file":"index.cjs.js","sources":["../../../node_modules/autosuggest-highlight/match/index.js","../../../node_modules/autosuggest-highlight/parse/index.js","../src/LocationInput.js","../src/MapList/MarkerClusterGroup.js","../src/MapList/QueryStringUpdater.js","../src/MapList/MobileDrawer.js","../src/MapList/MapList.js","../src/MapList/DefaultPopupContent.js","../src/MapField/ChangeView.js","../src/MapField/MapField.js","../src/extractContext.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.AutosuggestHighlightMatch=t():e.AutosuggestHighlightMatch=t()}(this,(()=>{return e={772:(e,t,o)=>{const r=o(826).remove,i=/[.*+?^${}()|[\\]\\\\]/g,n=/[a-z0-9_]/i,u=/\\s+/;e.exports=function(e,t,o){var s,a;a={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},s=(s=o)||{},Object.keys(s).forEach((e=>{a[e]=!!s[e]})),o=a;const c=Array.from(e).map((e=>r(e)));let l=c.join(\"\");return(t=r(t)).trim().split(u).filter((e=>e.length>0)).reduce(((e,t)=>{const r=t.length,u=!o.insideWords&&n.test(t[0])?\"\\\\b\":\"\",s=new RegExp(u+t.replace(i,\"\\\\$&\"),\"i\");let a,A;if(a=s.exec(l),o.requireMatchAll&&null===a)return l=\"\",[];for(;a;){A=a.index;const t=r-c.slice(A,A+r).join(\"\").length,i=A-c.slice(0,A).join(\"\").length,n=[A+i,A+r+i+t];if(n[0]!==n[1]&&e.push(n),l=l.slice(0,A)+new Array(r+1).join(\" \")+l.slice(A+r),!o.findAllOccurrences)break;a=s.exec(l)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={À:\"A\",Á:\"A\",Â:\"A\",Ã:\"A\",Ä:\"A\",Å:\"A\",Ấ:\"A\",Ắ:\"A\",Ẳ:\"A\",Ẵ:\"A\",Ặ:\"A\",Æ:\"AE\",Ầ:\"A\",Ằ:\"A\",Ȃ:\"A\",Ç:\"C\",Ḉ:\"C\",È:\"E\",É:\"E\",Ê:\"E\",Ë:\"E\",Ế:\"E\",Ḗ:\"E\",Ề:\"E\",Ḕ:\"E\",Ḝ:\"E\",Ȇ:\"E\",Ì:\"I\",Í:\"I\",Î:\"I\",Ï:\"I\",Ḯ:\"I\",Ȋ:\"I\",Ð:\"D\",Ñ:\"N\",Ò:\"O\",Ó:\"O\",Ô:\"O\",Õ:\"O\",Ö:\"O\",Ø:\"O\",Ố:\"O\",Ṍ:\"O\",Ṓ:\"O\",Ȏ:\"O\",Ù:\"U\",Ú:\"U\",Û:\"U\",Ü:\"U\",Ý:\"Y\",à:\"a\",á:\"a\",â:\"a\",ã:\"a\",ä:\"a\",å:\"a\",ấ:\"a\",ắ:\"a\",ẳ:\"a\",ẵ:\"a\",ặ:\"a\",æ:\"ae\",ầ:\"a\",ằ:\"a\",ȃ:\"a\",ç:\"c\",ḉ:\"c\",è:\"e\",é:\"e\",ê:\"e\",ë:\"e\",ế:\"e\",ḗ:\"e\",ề:\"e\",ḕ:\"e\",ḝ:\"e\",ȇ:\"e\",ì:\"i\",í:\"i\",î:\"i\",ï:\"i\",ḯ:\"i\",ȋ:\"i\",ð:\"d\",ñ:\"n\",ò:\"o\",ó:\"o\",ô:\"o\",õ:\"o\",ö:\"o\",ø:\"o\",ố:\"o\",ṍ:\"o\",ṓ:\"o\",ȏ:\"o\",ù:\"u\",ú:\"u\",û:\"u\",ü:\"u\",ý:\"y\",ÿ:\"y\",Ā:\"A\",ā:\"a\",Ă:\"A\",ă:\"a\",Ą:\"A\",ą:\"a\",Ć:\"C\",ć:\"c\",Ĉ:\"C\",ĉ:\"c\",Ċ:\"C\",ċ:\"c\",Č:\"C\",č:\"c\",C̆:\"C\",c̆:\"c\",Ď:\"D\",ď:\"d\",Đ:\"D\",đ:\"d\",Ē:\"E\",ē:\"e\",Ĕ:\"E\",ĕ:\"e\",Ė:\"E\",ė:\"e\",Ę:\"E\",ę:\"e\",Ě:\"E\",ě:\"e\",Ĝ:\"G\",Ǵ:\"G\",ĝ:\"g\",ǵ:\"g\",Ğ:\"G\",ğ:\"g\",Ġ:\"G\",ġ:\"g\",Ģ:\"G\",ģ:\"g\",Ĥ:\"H\",ĥ:\"h\",Ħ:\"H\",ħ:\"h\",Ḫ:\"H\",ḫ:\"h\",Ĩ:\"I\",ĩ:\"i\",Ī:\"I\",ī:\"i\",Ĭ:\"I\",ĭ:\"i\",Į:\"I\",į:\"i\",İ:\"I\",ı:\"i\",Ĳ:\"IJ\",ĳ:\"ij\",Ĵ:\"J\",ĵ:\"j\",Ķ:\"K\",ķ:\"k\",Ḱ:\"K\",ḱ:\"k\",K̆:\"K\",k̆:\"k\",Ĺ:\"L\",ĺ:\"l\",Ļ:\"L\",ļ:\"l\",Ľ:\"L\",ľ:\"l\",Ŀ:\"L\",ŀ:\"l\",Ł:\"l\",ł:\"l\",Ḿ:\"M\",ḿ:\"m\",M̆:\"M\",m̆:\"m\",Ń:\"N\",ń:\"n\",Ņ:\"N\",ņ:\"n\",Ň:\"N\",ň:\"n\",ŉ:\"n\",N̆:\"N\",n̆:\"n\",Ō:\"O\",ō:\"o\",Ŏ:\"O\",ŏ:\"o\",Ő:\"O\",ő:\"o\",Œ:\"OE\",œ:\"oe\",P̆:\"P\",p̆:\"p\",Ŕ:\"R\",ŕ:\"r\",Ŗ:\"R\",ŗ:\"r\",Ř:\"R\",ř:\"r\",R̆:\"R\",r̆:\"r\",Ȓ:\"R\",ȓ:\"r\",Ś:\"S\",ś:\"s\",Ŝ:\"S\",ŝ:\"s\",Ş:\"S\",Ș:\"S\",ș:\"s\",ş:\"s\",Š:\"S\",š:\"s\",Ţ:\"T\",ţ:\"t\",ț:\"t\",Ț:\"T\",Ť:\"T\",ť:\"t\",Ŧ:\"T\",ŧ:\"t\",T̆:\"T\",t̆:\"t\",Ũ:\"U\",ũ:\"u\",Ū:\"U\",ū:\"u\",Ŭ:\"U\",ŭ:\"u\",Ů:\"U\",ů:\"u\",Ű:\"U\",ű:\"u\",Ų:\"U\",ų:\"u\",Ȗ:\"U\",ȗ:\"u\",V̆:\"V\",v̆:\"v\",Ŵ:\"W\",ŵ:\"w\",Ẃ:\"W\",ẃ:\"w\",X̆:\"X\",x̆:\"x\",Ŷ:\"Y\",ŷ:\"y\",Ÿ:\"Y\",Y̆:\"Y\",y̆:\"y\",Ź:\"Z\",ź:\"z\",Ż:\"Z\",ż:\"z\",Ž:\"Z\",ž:\"z\",ſ:\"s\",ƒ:\"f\",Ơ:\"O\",ơ:\"o\",Ư:\"U\",ư:\"u\",Ǎ:\"A\",ǎ:\"a\",Ǐ:\"I\",ǐ:\"i\",Ǒ:\"O\",ǒ:\"o\",Ǔ:\"U\",ǔ:\"u\",Ǖ:\"U\",ǖ:\"u\",Ǘ:\"U\",ǘ:\"u\",Ǚ:\"U\",ǚ:\"u\",Ǜ:\"U\",ǜ:\"u\",Ứ:\"U\",ứ:\"u\",Ṹ:\"U\",ṹ:\"u\",Ǻ:\"A\",ǻ:\"a\",Ǽ:\"AE\",ǽ:\"ae\",Ǿ:\"O\",ǿ:\"o\",Þ:\"TH\",þ:\"th\",Ṕ:\"P\",ṕ:\"p\",Ṥ:\"S\",ṥ:\"s\",X́:\"X\",x́:\"x\",Ѓ:\"Г\",ѓ:\"г\",Ќ:\"К\",ќ:\"к\",A̋:\"A\",a̋:\"a\",E̋:\"E\",e̋:\"e\",I̋:\"I\",i̋:\"i\",Ǹ:\"N\",ǹ:\"n\",Ồ:\"O\",ồ:\"o\",Ṑ:\"O\",ṑ:\"o\",Ừ:\"U\",ừ:\"u\",Ẁ:\"W\",ẁ:\"w\",Ỳ:\"Y\",ỳ:\"y\",Ȁ:\"A\",ȁ:\"a\",Ȅ:\"E\",ȅ:\"e\",Ȉ:\"I\",ȉ:\"i\",Ȍ:\"O\",ȍ:\"o\",Ȑ:\"R\",ȑ:\"r\",Ȕ:\"U\",ȕ:\"u\",B̌:\"B\",b̌:\"b\",Č̣:\"C\",č̣:\"c\",Ê̌:\"E\",ê̌:\"e\",F̌:\"F\",f̌:\"f\",Ǧ:\"G\",ǧ:\"g\",Ȟ:\"H\",ȟ:\"h\",J̌:\"J\",ǰ:\"j\",Ǩ:\"K\",ǩ:\"k\",M̌:\"M\",m̌:\"m\",P̌:\"P\",p̌:\"p\",Q̌:\"Q\",q̌:\"q\",Ř̩:\"R\",ř̩:\"r\",Ṧ:\"S\",ṧ:\"s\",V̌:\"V\",v̌:\"v\",W̌:\"W\",w̌:\"w\",X̌:\"X\",x̌:\"x\",Y̌:\"Y\",y̌:\"y\",A̧:\"A\",a̧:\"a\",B̧:\"B\",b̧:\"b\",Ḑ:\"D\",ḑ:\"d\",Ȩ:\"E\",ȩ:\"e\",Ɛ̧:\"E\",ɛ̧:\"e\",Ḩ:\"H\",ḩ:\"h\",I̧:\"I\",i̧:\"i\",Ɨ̧:\"I\",ɨ̧:\"i\",M̧:\"M\",m̧:\"m\",O̧:\"O\",o̧:\"o\",Q̧:\"Q\",q̧:\"q\",U̧:\"U\",u̧:\"u\",X̧:\"X\",x̧:\"x\",Z̧:\"Z\",z̧:\"z\"},o=Object.keys(t).join(\"|\"),r=new RegExp(o,\"g\"),i=new RegExp(o,\"\"),n=function(e){return e.replace(r,(function(e){return t[e]}))};e.exports=n,e.exports.has=function(e){return!!e.match(i)},e.exports.remove=n}},t={},function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}(772);var e,t}));","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.AutosuggestHighlightParse=e():t.AutosuggestHighlightParse=e()}(this,(()=>{return t={705:t=>{t.exports=function(t,e){const h=[];return 0===e.length?h.push({text:t,highlight:!1}):e[0][0]>0&&h.push({text:t.slice(0,e[0][0]),highlight:!1}),e.forEach(((i,o)=>{const s=i[0],r=i[1];h.push({text:t.slice(s,r),highlight:!0}),o===e.length-1?r<t.length&&h.push({text:t.slice(r,t.length),highlight:!1}):r<e[o+1][0]&&h.push({text:t.slice(r,e[o+1][0]),highlight:!1})})),h}}},e={},function h(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,h),s.exports}(705);var t,e}));","import React, { useState, useMemo, useEffect } from 'react';\nimport { FieldTitle, InputHelperText, useInput, useTranslate, useLocale } from 'react-admin';\nimport { TextField, Typography, Grid, makeStyles } from '@material-ui/core';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport { default as highlightMatch } from 'autosuggest-highlight/match';\nimport { default as highlightParse } from 'autosuggest-highlight/parse';\nimport throttle from 'lodash.throttle';\n\nconst useStyles = makeStyles(theme => ({\n  icon: {\n    color: theme.palette.text.secondary,\n    marginRight: theme.spacing(2)\n  }\n}));\n\nconst selectOptionText = (option, optionText) => {\n  if (option.place_name) {\n    return option.place_name;\n  } else if (typeof optionText === 'string') {\n    return option[optionText];\n  } else if (typeof optionText === 'function') {\n    return optionText(option);\n  }\n};\n\nconst LocationInput = ({\n  mapboxConfig,\n  record,\n  resource,\n  source,\n  label,\n  basePath,\n  parse,\n  optionText,\n  helperText,\n  ...rest\n}) => {\n  if (!mapboxConfig) {\n    throw new Error('@semapps/geo-components : No mapbox configuration');\n  }\n  if (!mapboxConfig.access_token) {\n    throw new Error('@semapps/geo-components : No access token in mapbox configuration');\n  }\n\n  const classes = useStyles();\n  const locale = useLocale();\n  const translate = useTranslate();\n\n  const [keyword, setKeyword] = useState(''); // Typed keywords\n  const [options, setOptions] = useState([]); // Options returned by MapBox\n\n  // Do not pass the `parse` prop to useInput, as we manually call it on the onChange prop below\n  const {\n    input: { value, onChange, onBlur, onFocus },\n    isRequired,\n    meta: { error, submitError, touched }\n  } = useInput({ resource, source, ...rest });\n\n  const fetchMapbox = useMemo(\n    () =>\n      throttle((keyword, callback) => {\n        const fetchUrl = new URL(`https://api.mapbox.com/geocoding/v5/mapbox.places/${keyword}.json`);\n\n        // Use locale as default language\n        if (!mapboxConfig.language) mapboxConfig.language = locale;\n\n        // All options available at https://docs.mapbox.com/api/search/geocoding/#forward-geocoding\n        Object.entries(mapboxConfig).forEach(([key, value]) => {\n          if (Array.isArray(value)) {\n            value = value.join(',');\n          } else if (typeof value === 'boolean') {\n            value = value ? 'true' : 'false';\n          }\n          fetchUrl.searchParams.set(key, value);\n        });\n\n        fetch(fetchUrl.toString())\n          .then(res => res.json())\n          .then(json => callback(json));\n      }, 200),\n    [mapboxConfig, locale]\n  );\n\n  useEffect(() => {\n    // Do not trigger search if text input is empty or if it is the same as the current value\n    if (!keyword || keyword === selectOptionText(value, optionText)) {\n      return undefined;\n    } else {\n      fetchMapbox(keyword, results => setOptions(results.features));\n    }\n  }, [value, keyword, fetchMapbox]);\n\n  return (\n    <Autocomplete\n      autoComplete\n      value={value || null}\n      // We must include the current value as an option, to avoid this error\n      // https://github.com/mui-org/material-ui/issues/18514#issuecomment-636096386\n      options={value ? [value, ...options] : options}\n      // Do not show the current value as an option (this would break renderOptions)\n      filterSelectedOptions\n      // For some reasons, this prop has to be passed\n      filterOptions={x => x}\n      getOptionLabel={option => selectOptionText(option, optionText)}\n      getOptionSelected={(option, value) =>\n        selectOptionText(option, optionText) === selectOptionText(value, optionText)\n      }\n      // This function is called when the user selects an option\n      onChange={(event, newValue) => {\n        // Parse only if the value is not null (happens if the user clears the value)\n        if (newValue && parse) newValue = parse(newValue);\n        onChange(newValue);\n        setOptions([]);\n      }}\n      onInputChange={(event, newKeyword) => setKeyword(newKeyword)}\n      noOptionsText={translate('ra.navigation.no_results')}\n      renderInput={params => {\n        // Autocomplete=off doesn't work anymore in modern browsers\n        // https://stackoverflow.com/a/40791726/7900695\n        params.inputProps.autoComplete = 'new-password';\n        return (\n          <TextField\n            {...params}\n            inputProps={{\n              ...params.inputProps,\n              onBlur: e => {\n                onBlur(e);\n                if (params.inputProps.onBlur) {\n                  params.inputProps.onBlur(e);\n                }\n              },\n              onFocus: e => {\n                onFocus(e);\n                if (params.inputProps.onFocus) {\n                  params.inputProps.onFocus(e);\n                }\n              }\n            }}\n            label={\n              label !== '' &&\n              label !== false && (\n                <FieldTitle label={label} source={source} resource={resource} isRequired={isRequired} />\n              )\n            }\n            error={!!(touched && (error || submitError))}\n            helperText={<InputHelperText touched={touched} error={error || submitError} helperText={helperText} />}\n            {...rest}\n          />\n        );\n      }}\n      renderOption={option => {\n        const matches = highlightMatch(option.text, keyword);\n        const parts = highlightParse(option.text, matches);\n\n        return (\n          <Grid container alignItems=\"center\">\n            <Grid item>\n              <LocationOnIcon className={classes.icon} />\n            </Grid>\n            <Grid item xs>\n              {typeof parts === 'string'\n                ? parts\n                : parts.map((part, index) => (\n                    <span key={index} style={{ fontWeight: part.highlight ? 700 : 400 }}>\n                      {part.text}\n                    </span>\n                  ))}\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {option.place_name}\n              </Typography>\n            </Grid>\n          </Grid>\n        );\n      }}\n    />\n  );\n};\n\nLocationInput.defaultProps = {\n  variant: 'filled',\n  margin: 'dense'\n};\n\nexport default LocationInput;\n","import L from 'leaflet'\nimport { createPathComponent } from '@react-leaflet/core'\nimport 'leaflet.markercluster';\n\n// Taken from https://github.com/changey/react-leaflet-markercluster/blob/60992857087c181ada1e8e6659a6666a13c1f868/src/react-leaflet-markercluster.js\nfunction createMarkerCluster({ children: _c, ...props }, context) {\n  const clusterProps = {}\n  const clusterEvents = {}\n  // Splitting props and events to different objects\n  Object.entries(props).forEach(([propName, prop]) =>\n    propName.startsWith('on')\n      ? (clusterEvents[propName] = prop)\n      : (clusterProps[propName] = prop)\n  )\n\n  const instance = new L.MarkerClusterGroup(clusterProps)\n\n  // Initializing event listeners\n  Object.entries(clusterEvents).forEach(([eventAsProp, callback]) => {\n    const clusterEvent = `cluster${eventAsProp.substring(2).toLowerCase()}`\n    instance.on(clusterEvent, callback)\n  })\n  return {\n    instance,\n    context: {\n      ...context,\n      layerContainer: instance,\n    },\n  }\n}\n\nconst MarkerClusterGroup = createPathComponent(createMarkerCluster)\n\nexport default MarkerClusterGroup;\n","import React from 'react';\nimport { useHistory } from 'react-router';\nimport { useMapEvents } from 'react-leaflet';\n\n// Keep the zoom and center in query string, so that when we navigate back to the page, it stays focused on the same area\nconst QueryStringUpdater = () => {\n  const history = useHistory();\n  const query = new URLSearchParams(history.location.search);\n\n  useMapEvents({\n    moveend: test => {\n      query.set('lat', test.target.getCenter().lat);\n      query.set('lng', test.target.getCenter().lng);\n      history.replace({ pathname: history.location.pathname, search: '?' + query.toString() });\n    },\n    zoomend: test => {\n      query.set('zoom', test.target.getZoom());\n      history.replace({ pathname: history.location.pathname, search: '?' + query.toString() });\n    }\n  });\n  return null;\n};\n\nexport default QueryStringUpdater;\n","import React, { useEffect } from 'react';\nimport { useMap } from \"react-leaflet\";\nimport { Drawer, Box, IconButton, makeStyles } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles(() => ({\n  closeButton: {\n    position: 'absolute',\n    zIndex: 1400,\n    top: 0,\n    right: 0\n  }\n}));\n\nconst MobileDrawer = ({ record, basePath, popupContent, onClose }) => {\n  const classes = useStyles();\n  const map = useMap();\n  useEffect(() => {\n    if (record) {\n      map.setView([record.latitude, record.longitude]);\n    }\n  }, [record, map])\n\n  return(\n    <Drawer anchor=\"bottom\" open={!!record} onClose={onClose}>\n      <Box p={1} position=\"relative\">\n        <IconButton onClick={onClose} className={classes.closeButton}>\n          <CloseIcon />\n        </IconButton>\n        {record && React.createElement(popupContent, { record, basePath })}\n      </Box>\n    </Drawer>\n  )\n};\n\nexport default MobileDrawer;\n","import React, { useState } from 'react';\nimport { useListContext } from 'react-admin';\nimport { useLocation } from 'react-router';\nimport { useMediaQuery, Box, makeStyles } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport 'leaflet-defaulticon-compatibility';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from 'react-leaflet';\nimport MarkerClusterGroup from './MarkerClusterGroup';\nimport DefaultPopupContent from './DefaultPopupContent';\nimport QueryStringUpdater from './QueryStringUpdater';\nimport MobileDrawer from \"./MobileDrawer\";\n\nconst useStyles = makeStyles(() => ({\n  loading: {\n    zIndex: 1000,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n}));\n\nconst MapList = ({\n  latitude,\n  longitude,\n  label,\n  description,\n  popupContent,\n  height,\n  center,\n  zoom,\n  groupClusters,\n  boundToMarkers,\n  connectMarkers,\n  ...otherProps\n}) => {\n  const { ids, data, basePath, loading } = useListContext();\n  const xs = useMediaQuery(theme => theme.breakpoints.down('xs'), { noSsr: true });\n  const [drawerRecord, setDrawerRecord] = useState(null);\n  const classes = useStyles();\n\n  // Get the zoom and center from query string, if available\n  const query = new URLSearchParams(useLocation().search);\n  center = query.has('lat') && query.has('lng') ? [query.get('lat'), query.get('lng')] : center;\n  zoom = query.has('zoom') ? query.get('zoom') : zoom;\n\n  let previousRecord;\n\n  const records = ids\n    .filter(id => data[id])\n    .map(id => ({\n      ...data[id],\n      latitude: latitude && latitude(data[id]),\n      longitude: longitude && longitude(data[id]),\n      label: label && label(data[id]),\n      description: description && description(data[id])\n    }))\n    .filter(record => record.latitude && record.longitude);\n\n  const bounds =\n    boundToMarkers && records.length > 0 ? records.map(record => [record.latitude, record.longitude]) : undefined;\n\n  // Do not display anything if the bounds are not ready, otherwise the MapContainer will not be initialized correctly\n  if (boundToMarkers && !bounds) return null;\n\n  const markers = records.map((record, i) => {\n    const marker = (\n      <React.Fragment key={i}>\n        <Marker\n          position={[record.latitude, record.longitude]}\n          eventHandlers={\n            xs\n              ? {\n                  click: () => setDrawerRecord(record)\n                }\n              : undefined\n          }\n        >\n          {!xs && <Popup>{React.createElement(popupContent, { record, basePath })}</Popup>}\n        </Marker>\n        {connectMarkers && previousRecord && (\n          <Polyline\n            positions={[\n              [previousRecord.latitude, previousRecord.longitude],\n              [record.latitude, record.longitude]\n            ]}\n          />\n        )}\n      </React.Fragment>\n    );\n\n    // Save record so that we can trace lines\n    previousRecord = record;\n\n    return marker;\n  });\n\n  return (\n    <MapContainer\n      style={{ height }}\n      center={!boundToMarkers ? center : undefined}\n      zoom={!boundToMarkers ? zoom : undefined}\n      bounds={bounds}\n      {...otherProps}\n    >\n      <TileLayer\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      {loading && (\n        <Box alignItems=\"center\" className={classes.loading}>\n          <CircularProgress size={60} thickness={6} />\n        </Box>\n      )}\n      {groupClusters ? <MarkerClusterGroup showCoverageOnHover={false}>{markers}</MarkerClusterGroup> : markers}\n      <QueryStringUpdater />\n      <MobileDrawer\n        record={drawerRecord}\n        basePath={basePath}\n        popupContent={popupContent}\n        onClose={() => setDrawerRecord(null)}\n      />\n    </MapContainer>\n  );\n};\n\nMapList.defaultProps = {\n  height: 700,\n  center: [47, 2.213749],\n  zoom: 6,\n  groupClusters: true,\n  connectMarkers: false,\n  scrollWheelZoom: false,\n  popupContent: DefaultPopupContent\n};\n\nexport default MapList;\n","import React from 'react';\nimport { ShowButton, EditButton, useResourceDefinition } from 'react-admin';\nimport { Typography } from '@material-ui/core';\n\nconst DefaultPopupContent = ({ record, basePath }) => {\n  const resourceDefinition = useResourceDefinition({});\n  return (\n    <>\n      {record.label && <Typography variant=\"h5\">{record.label}</Typography>}\n      {record.description && (\n        <Typography>\n          {record.description.length > 150 ? record.description.substring(0, 150) + '...' : record.description}\n        </Typography>\n      )}\n      {resourceDefinition.hasShow && <ShowButton basePath={basePath} record={record} />}\n      {resourceDefinition.hasEdit && <EditButton basePath={basePath} record={record} />}\n    </>\n  );\n};\n\nexport default DefaultPopupContent;\n","import React from 'react';\nimport { useMap } from 'react-leaflet';\n\nconst ChangeView = ({ center, zoom }) => {\n  const map = useMap();\n  map.setView(center, zoom);\n  return null;\n};\n\nexport default ChangeView;\n","import React from 'react';\nimport { MapContainer, TileLayer, Marker } from 'react-leaflet';\nimport { Box, Typography } from '@material-ui/core';\nimport ChangeView from './ChangeView';\n\nconst MapField = ({ record, latitude, longitude, address, height, addLabel, typographyProps, ...rest }) => {\n  // Do not display the component if it has no latitude or longitude\n  const position = [latitude(record), longitude(record)];\n  if (!position[0] || !position[1]) return null;\n\n  return (\n    <Box>\n      {address && (\n        <Box mt={1} mb={1}>\n          <Typography {...typographyProps}>{address(record)}</Typography>\n        </Box>\n      )}\n      <MapContainer style={{ height }} center={position} {...rest}>\n        <ChangeView center={position} />\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <Marker position={position} />\n      </MapContainer>\n    </Box>\n  );\n};\n\nMapField.defaultProps = {\n  height: 400,\n  zoom: 11,\n  addLabel: true\n};\n\nexport default MapField;\n","const extractContext = (context, key) => {\n  const property = context.find(property => property.id.startsWith(key + '.'));\n  if (property) return property.text;\n};\n\nexport default extractContext;\n"],"names":["e","t","module","exports","772","o","r","remove","i","n","u","s","a","insideWords","findAllOccurrences","requireMatchAll","Object","keys","forEach","c","Array","from","map","l","join","trim","split","filter","length","reduce","test","RegExp","replace","A","exec","index","slice","push","sort","826","À","Á","Â","Ã","Ä","Å","Ấ","Ắ","Ẳ","Ẵ","Ặ","Æ","Ầ","Ằ","Ȃ","Ç","Ḉ","È","É","Ê","Ë","Ế","Ḗ","Ề","Ḕ","Ḝ","Ȇ","Ì","Í","Î","Ï","Ḯ","Ȋ","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","Ø","Ố","Ṍ","Ṓ","Ȏ","Ù","Ú","Û","Ü","Ý","à","á","â","ã","ä","å","ấ","ắ","ẳ","ẵ","ặ","æ","ầ","ằ","ȃ","ç","ḉ","è","é","ê","ë","ế","ḗ","ề","ḕ","ḝ","ȇ","ì","í","î","ï","ḯ","ȋ","ð","ñ","ò","ó","ô","õ","ö","ø","ố","ṍ","ṓ","ȏ","ù","ú","û","ü","ý","ÿ","Ā","ā","Ă","ă","Ą","ą","Ć","ć","Ĉ","ĉ","Ċ","ċ","Č","č","C̆","c̆","Ď","ď","Đ","đ","Ē","ē","Ĕ","ĕ","Ė","ė","Ę","ę","Ě","ě","Ĝ","Ǵ","ĝ","ǵ","Ğ","ğ","Ġ","ġ","Ģ","ģ","Ĥ","ĥ","Ħ","ħ","Ḫ","ḫ","Ĩ","ĩ","Ī","ī","Ĭ","ĭ","Į","į","İ","ı","Ĳ","ĳ","Ĵ","ĵ","Ķ","ķ","Ḱ","ḱ","K̆","k̆","Ĺ","ĺ","Ļ","ļ","Ľ","ľ","Ŀ","ŀ","Ł","ł","Ḿ","ḿ","M̆","m̆","Ń","ń","Ņ","ņ","Ň","ň","ŉ","N̆","n̆","Ō","ō","Ŏ","ŏ","Ő","ő","Œ","œ","P̆","p̆","Ŕ","ŕ","Ŗ","ŗ","Ř","ř","R̆","r̆","Ȓ","ȓ","Ś","ś","Ŝ","ŝ","Ş","Ș","ș","ş","Š","š","Ţ","ţ","ț","Ț","Ť","ť","Ŧ","ŧ","T̆","t̆","Ũ","ũ","Ū","ū","Ŭ","ŭ","Ů","ů","Ű","ű","Ų","ų","Ȗ","ȗ","V̆","v̆","Ŵ","ŵ","Ẃ","ẃ","X̆","x̆","Ŷ","ŷ","Ÿ","Y̆","y̆","Ź","ź","Ż","ż","Ž","ž","ſ","ƒ","Ơ","ơ","Ư","ư","Ǎ","ǎ","Ǐ","ǐ","Ǒ","ǒ","Ǔ","ǔ","Ǖ","ǖ","Ǘ","ǘ","Ǚ","ǚ","Ǜ","ǜ","Ứ","ứ","Ṹ","ṹ","Ǻ","ǻ","Ǽ","ǽ","Ǿ","ǿ","Þ","þ","Ṕ","ṕ","Ṥ","ṥ","X́","x́","Ѓ","ѓ","Ќ","ќ","A̋","a̋","E̋","e̋","I̋","i̋","Ǹ","ǹ","Ồ","ồ","Ṑ","ṑ","Ừ","ừ","Ẁ","ẁ","Ỳ","ỳ","Ȁ","ȁ","Ȅ","ȅ","Ȉ","ȉ","Ȍ","ȍ","Ȑ","ȑ","Ȕ","ȕ","B̌","b̌","Č̣","č̣","Ê̌","ê̌","F̌","f̌","Ǧ","ǧ","Ȟ","ȟ","J̌","ǰ","Ǩ","ǩ","M̌","m̌","P̌","p̌","Q̌","q̌","Ř̩","ř̩","Ṧ","ṧ","V̌","v̌","W̌","w̌","X̌","x̌","Y̌","y̌","A̧","a̧","B̧","b̧","Ḑ","ḑ","Ȩ","ȩ","Ɛ̧","ɛ̧","Ḩ","ḩ","I̧","i̧","Ɨ̧","ɨ̧","M̧","m̧","O̧","o̧","Q̧","q̧","U̧","u̧","X̧","x̧","Z̧","z̧","has","match","705","h","text","highlight","useStyles","makeStyles","theme","icon","color","palette","secondary","marginRight","spacing","selectOptionText","option","optionText","place_name","LocationInput","_ref","mapboxConfig","record","resource","source","label","basePath","parse","helperText","rest","_objectWithoutProperties","_excluded","Error","access_token","classes","locale","useLocale","translate","useTranslate","_useState2","_slicedToArray","useState","keyword","setKeyword","_useState4","options","setOptions","_useInput","useInput","_objectSpread","_useInput$input","input","value","onChange","onBlur","onFocus","isRequired","_useInput$meta","meta","error","submitError","touched","fetchMapbox","useMemo","throttle","callback","fetchUrl","URL","language","entries","_ref2","_ref3","key","isArray","searchParams","set","fetch","toString","then","res","json","useEffect","results","features","React","Autocomplete","autoComplete","filterSelectedOptions","filterOptions","x","getOptionLabel","getOptionSelected","event","newValue","onInputChange","newKeyword","noOptionsText","renderInput","params","inputProps","createElement","TextField","_extends","FieldTitle","InputHelperText","renderOption","matches","highlightMatch","parts","highlightParse","Grid","container","alignItems","item","LocationOnIcon","className","xs","part","style","fontWeight","Typography","variant","defaultProps","margin","MarkerClusterGroup","createPathComponent","context","children","props","clusterProps","clusterEvents","propName","prop","startsWith","instance","L","_ref4","_ref5","eventAsProp","clusterEvent","substring","toLowerCase","on","layerContainer","QueryStringUpdater","history","useHistory","query","URLSearchParams","location","search","useMapEvents","moveend","target","getCenter","lat","lng","pathname","zoomend","getZoom","closeButton","position","zIndex","top","right","MobileDrawer","popupContent","onClose","useMap","setView","latitude","longitude","Drawer","anchor","open","Box","p","IconButton","onClick","CloseIcon","loading","left","bottom","display","justifyContent","MapList","previousRecord","description","height","center","zoom","groupClusters","boundToMarkers","connectMarkers","otherProps","_useListContext","useListContext","ids","data","useMediaQuery","breakpoints","down","noSsr","drawerRecord","setDrawerRecord","useLocation","get","records","id","bounds","undefined","markers","marker","Fragment","Marker","eventHandlers","click","Popup","Polyline","positions","MapContainer","TileLayer","attribution","url","CircularProgress","size","thickness","showCoverageOnHover","scrollWheelZoom","resourceDefinition","useResourceDefinition","hasShow","ShowButton","hasEdit","EditButton","ChangeView","MapField","address","addLabel","typographyProps","mt","mb","property","find"],"mappings":"07GAA6O,IAA2jHA,EAAEC,EAAzuHC,EAAAC,SAAwLH,EAAE,CAACI,IAAI,CAACJ,EAAEC,EAAEI,KAAK,MAAMC,EAAED,EAAE,KAAKE,OAAOC,EAAE,sBAAsBC,EAAE,aAAaC,EAAE,MAAMV,EAAEG,QAAQ,SAASH,EAAEC,EAAEI,GAAG,IAAIM,EAAEC,EAAEA,EAAE,CAACC,aAAY,EAAGC,oBAAmB,EAAGC,iBAAgB,GAAIJ,GAAGA,EAAEN,IAAI,GAAGW,OAAOC,KAAKN,GAAGO,QAASlB,IAAIY,EAAEZ,KAAKW,EAAEX,KAAMK,EAAEO,EAAE,MAAMO,EAAEC,MAAMC,KAAKrB,GAAGsB,IAAKtB,GAAGM,EAAEN,IAAK,IAAIuB,EAAEJ,EAAEK,KAAK,IAAI,OAAOvB,EAAEK,EAAEL,IAAIwB,OAAOC,MAAMhB,GAAGiB,OAAQ3B,GAAGA,EAAE4B,OAAO,GAAIC,OAAQ,CAAC7B,EAAEC,KAAK,MAAMK,EAAEL,EAAE2B,OAAOlB,GAAGL,EAAEQ,aAAaJ,EAAEqB,KAAK7B,EAAE,IAAI,MAAM,GAAGU,EAAE,IAAIoB,OAAOrB,EAAET,EAAE+B,QAAQxB,EAAE,QAAQ,KAAK,IAAII,EAAEqB,EAAE,GAAGrB,EAAED,EAAEuB,KAAKX,GAAGlB,EAAEU,iBAAiB,OAAOH,EAAE,OAAOW,EAAE,GAAG,GAAG,KAAKX,GAAG,CAACqB,EAAErB,EAAEuB,MAAM,MAAMlC,EAAEK,EAAEa,EAAEiB,MAAMH,EAAEA,EAAE3B,GAAGkB,KAAK,IAAII,OAAOpB,EAAEyB,EAAEd,EAAEiB,MAAM,EAAEH,GAAGT,KAAK,IAAII,OAAOnB,EAAE,CAACwB,EAAEzB,EAAEyB,EAAE3B,EAAEE,EAAEP,GAAG,GAAGQ,EAAE,KAAKA,EAAE,IAAIT,EAAEqC,KAAK5B,GAAGc,EAAEA,EAAEa,MAAM,EAAEH,GAAG,IAAIb,MAAMd,EAAE,GAAGkB,KAAK,KAAKD,EAAEa,MAAMH,EAAE3B,IAAID,EAAES,mBAAmB,MAAMF,EAAED,EAAEuB,KAAKX,GAAG,OAAOvB,GAAI,IAAIsC,KAAM,CAACtC,EAAEC,IAAID,EAAE,GAAGC,EAAE,MAAOsC,IAAIvC,IAAI,IAAIC,EAAE,CAACuC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,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"}