{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"/home/jean-daniel/Documents/Projets/D\\xE9veloppement/ActivityPods/BCM/frontend/src/pages/RedirectPage.js\";\nimport React from 'react';\nimport { useLocation } from 'react-router';\nimport { Redirect } from 'react-router-dom';\nimport { useDataModels } from '@semapps/semantic-data-provider';\nimport ontologies from '../config/ontologies.json';\nvar prefix = function prefix(uri) {\n  if (!uri.startsWith('http')) return uri; // If it is already prefixed\n  var ontology = ontologies.find(function (o) {\n    return uri.startsWith(o.url);\n  });\n  return uri.replace(ontology.url, ontology.prefix + ':');\n};\nvar RedirectPage = function RedirectPage() {\n  var dataModels = useDataModels();\n  var location = useLocation();\n  var searchParams = new URLSearchParams(location.search);\n  if (dataModels) {\n    var prefixedType = prefix(searchParams.get('type'));\n    var resource = Object.keys(dataModels).find(function (key) {\n      return dataModels[key].types && dataModels[key].types.includes(prefixedType);\n    });\n    if (searchParams.has('uri')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        push: true,\n        to: \"/\".concat(resource, \"/\").concat(encodeURIComponent(searchParams.get('uri'))).concat(searchParams.get('mode') === 'show' ? '/show' : ''),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 14\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        push: true,\n        to: \"/\".concat(resource),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 14\n        }\n      });\n    }\n  } else {\n    return null;\n  }\n};\nexport default RedirectPage;","map":{"version":3,"names":["React","useLocation","Redirect","useDataModels","ontologies","prefix","uri","startsWith","ontology","find","o","url","replace","RedirectPage","dataModels","location","searchParams","URLSearchParams","search","prefixedType","get","resource","Object","keys","key","types","includes","has","encodeURIComponent"],"sources":["/home/jean-daniel/Documents/Projets/DÃ©veloppement/ActivityPods/BCM/frontend/src/pages/RedirectPage.js"],"sourcesContent":["import React from 'react';\nimport { useLocation } from 'react-router';\nimport { Redirect } from 'react-router-dom';\nimport { useDataModels } from '@semapps/semantic-data-provider';\nimport ontologies from '../config/ontologies.json';\n\nconst prefix = uri => {\n  if (!uri.startsWith('http')) return uri; // If it is already prefixed\n  const ontology = ontologies.find(o => uri.startsWith(o.url));\n  return uri.replace(ontology.url, ontology.prefix + ':');\n};\n\nconst RedirectPage = () => {\n  const dataModels = useDataModels();\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n\n  if (dataModels) {\n    const prefixedType = prefix(searchParams.get('type'));\n    const resource = Object.keys(dataModels).find(key => dataModels[key].types && dataModels[key].types.includes(prefixedType));\n    if (searchParams.has('uri')) {\n      return <Redirect push to={`/${resource}/${encodeURIComponent(searchParams.get('uri'))}${searchParams.get('mode') === 'show' ? '/show' : ''}`} />;\n    } else {\n      return <Redirect push to={`/${resource}`} />;\n    }\n  } else {\n    return null;\n  }\n};\n\nexport default RedirectPage;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,cAAc;AAC1C,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,aAAa,QAAQ,iCAAiC;AAC/D,OAAOC,UAAU,MAAM,2BAA2B;AAElD,IAAMC,MAAM,GAAG,SAATA,MAAM,CAAGC,GAAG,EAAI;EACpB,IAAI,CAACA,GAAG,CAACC,UAAU,CAAC,MAAM,CAAC,EAAE,OAAOD,GAAG,CAAC,CAAC;EACzC,IAAME,QAAQ,GAAGJ,UAAU,CAACK,IAAI,CAAC,UAAAC,CAAC;IAAA,OAAIJ,GAAG,CAACC,UAAU,CAACG,CAAC,CAACC,GAAG,CAAC;EAAA,EAAC;EAC5D,OAAOL,GAAG,CAACM,OAAO,CAACJ,QAAQ,CAACG,GAAG,EAAEH,QAAQ,CAACH,MAAM,GAAG,GAAG,CAAC;AACzD,CAAC;AAED,IAAMQ,YAAY,GAAG,SAAfA,YAAY,GAAS;EACzB,IAAMC,UAAU,GAAGX,aAAa,EAAE;EAClC,IAAMY,QAAQ,GAAGd,WAAW,EAAE;EAC9B,IAAMe,YAAY,GAAG,IAAIC,eAAe,CAACF,QAAQ,CAACG,MAAM,CAAC;EAEzD,IAAIJ,UAAU,EAAE;IACd,IAAMK,YAAY,GAAGd,MAAM,CAACW,YAAY,CAACI,GAAG,CAAC,MAAM,CAAC,CAAC;IACrD,IAAMC,QAAQ,GAAGC,MAAM,CAACC,IAAI,CAACT,UAAU,CAAC,CAACL,IAAI,CAAC,UAAAe,GAAG;MAAA,OAAIV,UAAU,CAACU,GAAG,CAAC,CAACC,KAAK,IAAIX,UAAU,CAACU,GAAG,CAAC,CAACC,KAAK,CAACC,QAAQ,CAACP,YAAY,CAAC;IAAA,EAAC;IAC3H,IAAIH,YAAY,CAACW,GAAG,CAAC,KAAK,CAAC,EAAE;MAC3B,oBAAO,oBAAC,QAAQ;QAAC,IAAI;QAAC,EAAE,aAAMN,QAAQ,cAAIO,kBAAkB,CAACZ,YAAY,CAACI,GAAG,CAAC,KAAK,CAAC,CAAC,SAAGJ,YAAY,CAACI,GAAG,CAAC,MAAM,CAAC,KAAK,MAAM,GAAG,OAAO,GAAG,EAAE,CAAG;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAAG;IAClJ,CAAC,MAAM;MACL,oBAAO,oBAAC,QAAQ;QAAC,IAAI;QAAC,EAAE,aAAMC,QAAQ,CAAG;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAAG;IAC9C;EACF,CAAC,MAAM;IACL,OAAO,IAAI;EACb;AACF,CAAC;AAED,eAAeR,YAAY"},"metadata":{},"sourceType":"module"}