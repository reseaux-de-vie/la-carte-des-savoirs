{"ast":null,"code":"import t, { useMemo as r, useState as e } from \"react\";\nimport n from \"markdown-to-jsx\";\nimport o from \"react-mde\";\nimport { required as i, useInput as a, Labeled as c, InputHelperText as u, useDataProvider as l, useTranslate as f } from \"react-admin\";\nimport { makeStyles as s, FormControl as h, FormHelperText as p } from \"@material-ui/core\";\nfunction v(t, r) {\n  var e = Object.keys(t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(t);\n    r && (n = n.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(t, r).enumerable;\n    })), e.push.apply(e, n);\n  }\n  return e;\n}\nfunction y(t) {\n  for (var r = 1; r < arguments.length; r++) {\n    var e = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? v(Object(e), !0).forEach(function (r) {\n      b(t, r, e[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(e)) : v(Object(e)).forEach(function (r) {\n      Object.defineProperty(t, r, Object.getOwnPropertyDescriptor(e, r));\n    });\n  }\n  return t;\n}\nfunction d() {\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  d = function d() {\n    return t;\n  };\n  var t = {},\n    r = Object.prototype,\n    e = r.hasOwnProperty,\n    n = \"function\" == typeof Symbol ? Symbol : {},\n    o = n.iterator || \"@@iterator\",\n    i = n.asyncIterator || \"@@asyncIterator\",\n    a = n.toStringTag || \"@@toStringTag\";\n  function c(t, r, e) {\n    return Object.defineProperty(t, r, {\n      value: e,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[r];\n  }\n  try {\n    c({}, \"\");\n  } catch (t) {\n    c = function c(t, r, e) {\n      return t[r] = e;\n    };\n  }\n  function u(t, r, e, n) {\n    var o = r && r.prototype instanceof s ? r : s,\n      i = Object.create(o.prototype),\n      a = new j(n || []);\n    return i._invoke = function (t, r, e) {\n      var n = \"suspendedStart\";\n      return function (o, i) {\n        if (\"executing\" === n) throw new Error(\"Generator is already running\");\n        if (\"completed\" === n) {\n          if (\"throw\" === o) throw i;\n          return P();\n        }\n        for (e.method = o, e.arg = i;;) {\n          var a = e.delegate;\n          if (a) {\n            var c = O(a, e);\n            if (c) {\n              if (c === f) continue;\n              return c;\n            }\n          }\n          if (\"next\" === e.method) e.sent = e._sent = e.arg;else if (\"throw\" === e.method) {\n            if (\"suspendedStart\" === n) throw n = \"completed\", e.arg;\n            e.dispatchException(e.arg);\n          } else \"return\" === e.method && e.abrupt(\"return\", e.arg);\n          n = \"executing\";\n          var u = l(t, r, e);\n          if (\"normal\" === u.type) {\n            if (n = e.done ? \"completed\" : \"suspendedYield\", u.arg === f) continue;\n            return {\n              value: u.arg,\n              done: e.done\n            };\n          }\n          \"throw\" === u.type && (n = \"completed\", e.method = \"throw\", e.arg = u.arg);\n        }\n      };\n    }(t, e, a), i;\n  }\n  function l(t, r, e) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(r, e)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  t.wrap = u;\n  var f = {};\n  function s() {}\n  function h() {}\n  function p() {}\n  var v = {};\n  c(v, o, function () {\n    return this;\n  });\n  var y = Object.getPrototypeOf,\n    m = y && y(y(L([])));\n  m && m !== r && e.call(m, o) && (v = m);\n  var g = p.prototype = s.prototype = Object.create(v);\n  function b(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (r) {\n      c(t, r, function (t) {\n        return this._invoke(r, t);\n      });\n    });\n  }\n  function w(t, r) {\n    var n;\n    this._invoke = function (o, i) {\n      function a() {\n        return new r(function (n, a) {\n          !function n(o, i, a, c) {\n            var u = l(t[o], t, i);\n            if (\"throw\" !== u.type) {\n              var f = u.arg,\n                s = f.value;\n              return s && \"object\" == typeof s && e.call(s, \"__await\") ? r.resolve(s.__await).then(function (t) {\n                n(\"next\", t, a, c);\n              }, function (t) {\n                n(\"throw\", t, a, c);\n              }) : r.resolve(s).then(function (t) {\n                f.value = t, a(f);\n              }, function (t) {\n                return n(\"throw\", t, a, c);\n              });\n            }\n            c(u.arg);\n          }(o, i, n, a);\n        });\n      }\n      return n = n ? n.then(a, a) : a();\n    };\n  }\n  function O(t, r) {\n    var e = t.iterator[r.method];\n    if (void 0 === e) {\n      if (r.delegate = null, \"throw\" === r.method) {\n        if (t.iterator.return && (r.method = \"return\", r.arg = void 0, O(t, r), \"throw\" === r.method)) return f;\n        r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n      return f;\n    }\n    var n = l(e, t.iterator, r.arg);\n    if (\"throw\" === n.type) return r.method = \"throw\", r.arg = n.arg, r.delegate = null, f;\n    var o = n.arg;\n    return o ? o.done ? (r[t.resultName] = o.value, r.next = t.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = void 0), r.delegate = null, f) : o : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, f);\n  }\n  function x(t) {\n    var r = {\n      tryLoc: t[0]\n    };\n    1 in t && (r.catchLoc = t[1]), 2 in t && (r.finallyLoc = t[2], r.afterLoc = t[3]), this.tryEntries.push(r);\n  }\n  function E(t) {\n    var r = t.completion || {};\n    r.type = \"normal\", delete r.arg, t.completion = r;\n  }\n  function j(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(x, this), this.reset(!0);\n  }\n  function L(t) {\n    if (t) {\n      var r = t[o];\n      if (r) return r.call(t);\n      if (\"function\" == typeof t.next) return t;\n      if (!isNaN(t.length)) {\n        var n = -1,\n          i = function r() {\n            for (; ++n < t.length;) if (e.call(t, n)) return r.value = t[n], r.done = !1, r;\n            return r.value = void 0, r.done = !0, r;\n          };\n        return i.next = i;\n      }\n    }\n    return {\n      next: P\n    };\n  }\n  function P() {\n    return {\n      value: void 0,\n      done: !0\n    };\n  }\n  return h.prototype = p, c(g, \"constructor\", p), c(p, \"constructor\", h), h.displayName = c(p, a, \"GeneratorFunction\"), t.isGeneratorFunction = function (t) {\n    var r = \"function\" == typeof t && t.constructor;\n    return !!r && (r === h || \"GeneratorFunction\" === (r.displayName || r.name));\n  }, t.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, p) : (t.__proto__ = p, c(t, a, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, t.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, b(w.prototype), c(w.prototype, i, function () {\n    return this;\n  }), t.AsyncIterator = w, t.async = function (r, e, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new w(u(r, e, n, o), i);\n    return t.isGeneratorFunction(e) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, b(g), c(g, a, \"Generator\"), c(g, o, function () {\n    return this;\n  }), c(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), t.keys = function (t) {\n    var r = [];\n    for (var e in t) r.push(e);\n    return r.reverse(), function e() {\n      for (; r.length;) {\n        var n = r.pop();\n        if (n in t) return e.value = n, e.done = !1, e;\n      }\n      return e.done = !0, e;\n    };\n  }, t.values = L, j.prototype = {\n    constructor: j,\n    reset: function reset(t) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = void 0, this.tryEntries.forEach(E), !t) for (var r in this) \"t\" === r.charAt(0) && e.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = void 0);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(t) {\n      if (this.done) throw t;\n      var r = this;\n      function n(e, n) {\n        return a.type = \"throw\", a.arg = t, r.next = e, n && (r.method = \"next\", r.arg = void 0), !!n;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return n(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = e.call(i, \"catchLoc\"),\n            u = e.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return n(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return n(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return n(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return n(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, r) {\n      for (var n = this.tryEntries.length - 1; n >= 0; --n) {\n        var o = this.tryEntries[n];\n        if (o.tryLoc <= this.prev && e.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= r && r <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = r, i ? (this.method = \"next\", this.next = i.finallyLoc, f) : this.complete(a);\n    },\n    complete: function complete(t, r) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f;\n    },\n    finish: function finish(t) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var e = this.tryEntries[r];\n        if (e.finallyLoc === t) return this.complete(e.completion, e.afterLoc), E(e), f;\n      }\n    },\n    catch: function _catch(t) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var e = this.tryEntries[r];\n        if (e.tryLoc === t) {\n          var n = e.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            E(e);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(t, r, e) {\n      return this.delegate = {\n        iterator: L(t),\n        resultName: r,\n        nextLoc: e\n      }, \"next\" === this.method && (this.arg = void 0), f;\n    }\n  }, t;\n}\nfunction m(t, r, e, n, o, i, a) {\n  try {\n    var c = t[i](a),\n      u = c.value;\n  } catch (t) {\n    return void e(t);\n  }\n  c.done ? r(u) : Promise.resolve(u).then(n, o);\n}\nfunction g(t) {\n  return function () {\n    var r = this,\n      e = arguments;\n    return new Promise(function (n, o) {\n      var i = t.apply(r, e);\n      function a(t) {\n        m(i, n, o, a, c, \"next\", t);\n      }\n      function c(t) {\n        m(i, n, o, a, c, \"throw\", t);\n      }\n      a(void 0);\n    });\n  };\n}\nfunction b(t, r, e) {\n  return r in t ? Object.defineProperty(t, r, {\n    value: e,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : t[r] = e, t;\n}\nfunction w() {\n  return (w = Object.assign ? Object.assign.bind() : function (t) {\n    for (var r = 1; r < arguments.length; r++) {\n      var e = arguments[r];\n      for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n    }\n    return t;\n  }).apply(this, arguments);\n}\nfunction O(t, r) {\n  if (null == t) return {};\n  var e,\n    n,\n    o = function (t, r) {\n      if (null == t) return {};\n      var e,\n        n,\n        o = {},\n        i = Object.keys(t);\n      for (n = 0; n < i.length; n++) e = i[n], r.indexOf(e) >= 0 || (o[e] = t[e]);\n      return o;\n    }(t, r);\n  if (Object.getOwnPropertySymbols) {\n    var i = Object.getOwnPropertySymbols(t);\n    for (n = 0; n < i.length; n++) e = i[n], r.indexOf(e) >= 0 || Object.prototype.propertyIsEnumerable.call(t, e) && (o[e] = t[e]);\n  }\n  return o;\n}\nfunction x(t, r) {\n  return function (t) {\n    if (Array.isArray(t)) return t;\n  }(t) || function (t, r) {\n    var e = null == t ? null : \"undefined\" != typeof Symbol && t[Symbol.iterator] || t[\"@@iterator\"];\n    if (null == e) return;\n    var n,\n      o,\n      i = [],\n      a = !0,\n      c = !1;\n    try {\n      for (e = e.call(t); !(a = (n = e.next()).done) && (i.push(n.value), !r || i.length !== r); a = !0);\n    } catch (t) {\n      c = !0, o = t;\n    } finally {\n      try {\n        a || null == e.return || e.return();\n      } finally {\n        if (c) throw o;\n      }\n    }\n    return i;\n  }(t, r) || function (t, r) {\n    if (!t) return;\n    if (\"string\" == typeof t) return E(t, r);\n    var e = Object.prototype.toString.call(t).slice(8, -1);\n    \"Object\" === e && t.constructor && (e = t.constructor.name);\n    if (\"Map\" === e || \"Set\" === e) return Array.from(t);\n    if (\"Arguments\" === e || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)) return E(t, r);\n  }(t, r) || function () {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }();\n}\nfunction E(t, r) {\n  (null == r || r > t.length) && (r = t.length);\n  for (var e = 0, n = new Array(r); e < r; e++) n[e] = t[e];\n  return n;\n}\nvar j = [\"source\", \"record\", \"LabelComponent\", \"overrides\"],\n  L = function L(r) {\n    var e = r.source,\n      o = r.record,\n      i = r.LabelComponent,\n      a = r.overrides,\n      c = void 0 === a ? {} : a,\n      u = O(r, j);\n    return o && o[e] ? t.createElement(n, {\n      options: y({\n        createElement: function createElement(r, e, n) {\n          return e.label ? t.createElement(t.Fragment, null, t.createElement(i, null, e.label), t.createElement(r, e, n)) : t.createElement(r, e, n);\n        },\n        overrides: y({\n          h1: i\n        }, c)\n      }, u)\n    }, o[e]) : null;\n  };\nL.defaultProps = {\n  LabelComponent: \"h2\",\n  addLabel: !0\n};\nvar P = s(function (t) {\n    return {\n      validationError: {\n        \"& .MuiFormLabel-root\": {\n          color: t.palette.error.main\n        },\n        \"& .mde-text\": {\n          outline: \"-webkit-focus-ring-color auto 1px\",\n          outlineOffset: 0,\n          outlineColor: t.palette.error.main,\n          outlineStyle: \"auto\",\n          outlineWidth: 1\n        }\n      }\n    };\n  }),\n  S = function S(l) {\n    var f = P(),\n      s = l.validate,\n      v = r(function () {\n        return !!s && !![].concat(s).find(function (t) {\n          return t.toString() === i().toString();\n        });\n      }, [s]),\n      y = x(e(\"write\"), 2),\n      m = y[0],\n      b = y[1],\n      O = a(l),\n      E = O.input,\n      j = E.value,\n      L = E.onChange,\n      S = O.meta,\n      k = S.error,\n      _ = S.touched;\n    return t.createElement(h, {\n      fullWidth: !0,\n      className: \"ra-input-mde \".concat(k ? f.validationError : \"\")\n    }, t.createElement(c, w({}, l, {\n      isRequired: v\n    }), t.createElement(o, w({\n      value: j,\n      onChange: function onChange(t) {\n        return L(t);\n      },\n      onTabChange: function onTabChange(t) {\n        return b(t);\n      },\n      generateMarkdownPreview: function () {\n        var r = g(d().mark(function r(e) {\n          return d().wrap(function (r) {\n            for (;;) switch (r.prev = r.next) {\n              case 0:\n                return r.abrupt(\"return\", t.createElement(n, null, e));\n              case 1:\n              case \"end\":\n                return r.stop();\n            }\n          }, r);\n        }));\n        return function (t) {\n          return r.apply(this, arguments);\n        };\n      }(),\n      selectedTab: m\n    }, l))), t.createElement(p, {\n      error: !!k,\n      margin: \"dense\",\n      variant: \"outlined\"\n    }, t.createElement(u, {\n      error: k,\n      helperText: l.helperText,\n      touched: k || _\n    })));\n  },\n  k = function k(t, r) {\n    var e = l(),\n      n = f();\n    return function () {\n      var o = g(d().mark(function o(i) {\n        var a;\n        return d().wrap(function (o) {\n          for (;;) switch (o.prev = o.next) {\n            case 0:\n              if (!i) {\n                o.next = 9;\n                break;\n              }\n              return o.next = 3, e.getList(t, {\n                pagination: {\n                  page: 1,\n                  perPage: 5\n                },\n                filter: {\n                  q: i\n                }\n              });\n            case 3:\n              if (!((a = o.sent).total > 0)) {\n                o.next = 8;\n                break;\n              }\n              return o.abrupt(\"return\", a.data.map(function (e) {\n                return {\n                  preview: e[r],\n                  value: \"[\".concat(e[r], \"](/\").concat(t, \"/\").concat(encodeURIComponent(e.id), \"/show)\")\n                };\n              }));\n            case 8:\n              return o.abrupt(\"return\", [{\n                preview: n(\"ra.navigation.no_results\"),\n                value: \"[\" + i\n              }]);\n            case 9:\n              return o.abrupt(\"return\", [{\n                preview: n(\"ra.action.search\"),\n                value: \"[\" + i\n              }]);\n            case 10:\n            case \"end\":\n              return o.stop();\n          }\n        }, o);\n      }));\n      return function (t) {\n        return o.apply(this, arguments);\n      };\n    }();\n  };\nexport { L as MarkdownField, S as MarkdownInput, k as useLoadLinks };","map":{"version":3,"sources":["../src/MarkdownField.js","../src/MarkdownInput.js","../src/useLoadLinks.js"],"names":["MarkdownField","source","record","LabelComponent","overrides","rest","React","Markdown","options","_objectSpread","createElement","type","props","children","label","h1","defaultProps","addLabel","useStyles","makeStyles","validationError","& .MuiFormLabel-root","color","theme","palette","error","main","& .mde-text","outline","outlineOffset","outlineColor","outlineStyle","outlineWidth","MarkdownInput","classes","validate","isRequired","useMemo","concat","find","v","toString","required","_useState2","tab","setTab","useState","_useInput$input","input","value","onChange","meta","touched","useInput","FormControl","fullWidth","className","Labeled","ReactMde","onTabChange","generateMarkdownPreview","markdown","selectedTab","FormHelperText","margin","variant","InputHelperText","helperText","useLoadLinks","resourceType","labelProp","dataProvider","useDataProvider","translate","useTranslate","keyword","results","getList","pagination","page","perPage","filter","q","total","data","map","preview","encodeURIComponent","id"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Markdown from 'markdown-to-jsx';\n\nconst MarkdownField = ({ source, record, LabelComponent, overrides = {}, ...rest }) =>\n  record && record[source] ? (\n    <Markdown\n      options={{\n        createElement(type, props, children) {\n          if (props.label) {\n            return (\n              <>\n                <LabelComponent>{props.label}</LabelComponent>\n                {React.createElement(type, props, children)}\n              </>\n            );\n          } else {\n            return React.createElement(type, props, children);\n          }\n        },\n        overrides: {\n          h1: LabelComponent,\n          ...overrides\n        },\n        ...rest\n      }}\n    >\n      {record[source]}\n    </Markdown>\n  ) : null;\n\nMarkdownField.defaultProps = {\n  LabelComponent: 'h2',\n  addLabel: true\n};\n\nexport default MarkdownField;\n","import React, { useMemo, useState } from 'react';\nimport ReactMde from 'react-mde';\nimport Markdown from 'markdown-to-jsx';\nimport { useInput, InputHelperText, Labeled, required } from 'react-admin';\nimport { FormControl, FormHelperText, makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  validationError: {\n    '& .MuiFormLabel-root': {\n      color: theme.palette.error.main\n    },\n    '& .mde-text': {\n      outline: '-webkit-focus-ring-color auto 1px',\n      outlineOffset: 0,\n      outlineColor: theme.palette.error.main,\n      outlineStyle: 'auto',\n      outlineWidth: 1\n    }\n  }\n}));\n\nconst MarkdownInput = props => {\n  const classes = useStyles();\n  const { validate } = props;\n  const isRequired = useMemo(\n    () => !!validate && !![].concat(validate).find(v => v.toString() === required().toString()),\n    [validate]\n  );\n  const [tab, setTab] = useState('write');\n  const {\n    input: { value, onChange },\n    meta: { error, touched }\n  } = useInput(props);\n\n  return (\n    <FormControl fullWidth className={`ra-input-mde ${!!error ? classes.validationError : ''}`}>\n      <Labeled {...props} isRequired={isRequired}>\n        <ReactMde\n          value={value}\n          onChange={value => onChange(value)}\n          onTabChange={tab => setTab(tab)}\n          generateMarkdownPreview={async markdown => <Markdown>{markdown}</Markdown>}\n          selectedTab={tab}\n          {...props}\n        />\n      </Labeled>\n      <FormHelperText error={!!error} margin=\"dense\" variant=\"outlined\">\n        <InputHelperText error={error} helperText={props.helperText} touched={error || touched} />\n      </FormHelperText>\n    </FormControl>\n  );\n};\n\nexport default MarkdownInput;\n","import { useDataProvider, useTranslate } from 'react-admin';\n\nconst useLoadLinks = (resourceType, labelProp) => {\n  const dataProvider = useDataProvider();\n  const translate = useTranslate();\n  return async keyword => {\n    if (keyword) {\n      const results = await dataProvider.getList(resourceType, {\n        pagination: {\n          page: 1,\n          perPage: 5\n        },\n        filter: { q: keyword }\n      });\n      if (results.total > 0) {\n        return results.data.map(record => ({\n          preview: record[labelProp],\n          value: `[${record[labelProp]}](/${resourceType}/${encodeURIComponent(record.id)}/show)`\n        }));\n      } else {\n        return [{ preview: translate('ra.navigation.no_results'), value: '[' + keyword }];\n      }\n    }\n    return [{ preview: translate('ra.action.search'), value: '[' + keyword }];\n  };\n};\n\nexport default useLoadLinks;\n"]},"metadata":{},"sourceType":"module"}